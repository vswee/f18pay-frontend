(function(e){function t(t){for(var i,o,n=t[0],c=t[1],l=t[2],u=0,h=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,n=1;n<s.length;n++){var c=s[n];0!==a[c]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/f18pay-frontend/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var l=0;l<n.length;l++)t(n[l]);var d=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"046f":function(e,t,s){},"052e":function(e,t,s){"use strict";s("eed4")},"06f1":function(e,t,s){"use strict";s("f325")},"0b69":function(e,t,s){"use strict";s("8a91")},"0ba9":function(e,t,s){"use strict";s("25ef")},1:function(e,t){},1404:function(e,t,s){},"19cb":function(e,t,s){"use strict";s("9e4c")},"25ef":function(e,t,s){},"34d8":function(e,t,s){},"411a":function(e,t,s){"use strict";s("a05b")},"43a7":function(e,t,s){},"457f":function(e,t,s){"use strict";s("47bb")},4678:function(e,t,s){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=r(e);return s(t)}function r(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id="4678"},"47bb":function(e,t,s){},"4eae":function(e,t,s){"use strict";s("903d")},"56d7":function(e,t,s){"use strict";s.r(t);var i=s("2b0e"),a=function(){var e=this,t=e._self._c;return t("div",{class:e.theme,attrs:{id:"app"}},[t("Header"),t("Sidebar"),t("div",{class:e.session?"sessioned":"",attrs:{id:"main"}},[t("router-view")],1),t("Footer"),t("ChatWoot"),e.session&&"new"==e.storeModalView?t("NewStoreModal"):e._e()],1)},r=[],o=function(){var e=this,t=e._self._c;return t("div",{class:e.session?"sessioned":"",attrs:{id:"footer"}},[e.session&&!e.help?t("a",{staticClass:"btn help",on:{click:function(t){e.help=!0}}},[t("i",{staticClass:"fas fa-exclamation-circle"})]):e._e(),e.session&&e.help?t("a",{staticClass:"btn help",on:{click:function(t){e.help=!1}}},[t("i",{staticClass:"fas fa-times"})]):e._e(),e.session&&e.help||!e.session?t("div",{staticClass:"footer-inner"},[t("p",{staticClass:"copyright_",on:{click:function(t){e.help=!1}}},[e._v(" Having a problem? Send us an email at "),t("a",{attrs:{href:"mailto:f18pay.help@flat18.co.uk"}},[e._v("f18pay.help@flat18.co.uk")]),t("br"),t("br"),e._v(" Found a bug or an issue with our frontend code? Submit an Issue or PR on our "),e._m(0),t("br"),t("br"),e._v(" © Flat 18 Microsystems Development 2018-2022 "),t("br"),t("br"),e._v("This website does not use cookies. "),t("br"),t("br"),e._m(1)])]):e._e()])},n=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"https://github.com/vswee/f18pay-frontend",target:"_blank",title:"F18 Pay Github"}},[e._v("GitHub page "),t("i",{staticClass:"fab fa-github"})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{alt:"",target:"_blank",href:"https://flat18.co.uk/privacy"}},[e._v("Flat18 Umbrella Privacy Policy "),t("i",{staticClass:"fas fa-arrow-right"})])}],c=s("2f62"),l={data(){return{help:!1}},computed:{...Object(c["b"])({session:"session"})},name:"Footer"},d=l,u=(s("8c38"),s("2877")),h=Object(u["a"])(d,o,n,!1,null,"626ee9aa",null),p=h.exports,m=function(){var e=this,t=e._self._c;return t("div",{class:e.session&&e.showTitle&&e.viewTitle&&e.working?"header working":"header",attrs:{id:"header"}},[t("a",{staticClass:"logo",attrs:{title:"home"},on:{click:function(t){return e.clearToHome()}}},[t("svg",{attrs:{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 158 201",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("clipPath",{attrs:{id:"a"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}})]),t("g",{attrs:{fill:"none",transform:"matrix(.783337 0 0 1 -354.093 -485.418639)"}},[t("path",{attrs:{d:"m452.032 485.419h200.428v200.428h-200.428z"}}),t("g",{attrs:{transform:"matrix(.887335 0 0 .695083 463.512 491.096)"}},[t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}}),t("g",{staticStyle:{opacity:".4"},attrs:{"clip-path":"url(#a)",stroke:"var(--accent)"}},[t("path",{attrs:{d:"m152.859 88.576c0 36.334-29.498 65.832-65.832 65.832-18.819 0-35.804-7.914-47.807-20.592","stroke-width":"12.52",transform:"matrix(1.8383 0 0 1.8383 -83.7675 -82.1042)"}}),t("circle",{attrs:{cx:"87.027",cy:"88.576",r:"65.832","stroke-width":"23.27",transform:"matrix(.989007 0 0 .989007 -4.79082 -6.87718)"}})]),t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z",stroke:"var(--accent)","stroke-width":"23.02"}})])])]),e.showTitle&&e.showTitle&&e.viewTitle?e._e():t("b",[e._v("F18 Pay")]),e.session&&e.showTitle&&e.viewTitle?t("b",{staticClass:"ui-scroll-title"},[e._v(e._s(e.viewTitle))]):e._e()]),t("div",{class:e.session&&e.showTitle&&e.viewTitle?"dynamic-cta-header-space active":"dynamic-cta-header-space"}),t("div",{staticClass:"notification-workspace"},[e.authFailure?[t("div",{staticClass:"notification foot bad error",on:{click:e.clearAuthFailure}},[e._v(e._s(e.authFailure))])]:e._e()],2),t("div",{staticClass:"links"},[e.session?e._e():t("div",{staticClass:"links"},["login"!==e.currentRouteName?t("router-link",{staticClass:"link",attrs:{to:{name:"login"},title:"Log in to your account or sign up"}},[e._v("log in")]):e._e()],1),t("a",{staticClass:"link",on:{click:function(t){return e.toggleTheme()}}},["dark"===e.theme?t("i",{staticClass:"fas fa-sun"}):e._e(),"light"===e.theme?t("i",{staticClass:"fas fa-moon"}):e._e()]),e._m(0),e._m(1),e.session&&e.currentRouteName?t("div",{staticClass:"links"},["dashboard"!==e.currentRouteName?t("router-link",{staticClass:"link",attrs:{to:{name:"dashboard"},title:"Access your dashboard"}},[e._v("Dashboard")]):e._e(),t("a",{staticClass:"link",on:{click:function(t){return e.logout()}}},[e._v("Log Out")])],1):e._e()])])},v=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"https://github.com/vswee/f18pay-frontend",target:"_blank",title:"F18 Pay Github"}},[t("i",{staticClass:"fab fa-github"})])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"link",attrs:{href:"https://twitter.com/f18micro",target:"_blank",title:"Flat18 Twitter"}},[t("i",{staticClass:"fab fa-twitter"})])}],f=(s("14d9"),{name:"Header",data(){return{currentRoute:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",session:"session",showTitle:"showTitle",viewTitle:"viewTitle",theme:"theme",working:"working",authFailure:"authFailure"}),currentRouteName(){return this.$route.name}},methods:{clearAuthFailure(){this.$store.commit("setAuthFailure",!1),this.$router.push({name:"login"})},clearToHome(){this.session?("dashboard"!==this.$router.currentRoute.name&&this.$router.push({name:"dashboard"}),this.$store.commit("setActiveStore",!1),this.$store.commit("setStoreView",!1),this.$store.commit("setViewTitle",!1),this.$store.commit("setShowTitle",!1)):"home"!==this.$router.currentRoute.name&&this.$router.push({name:"home"})},logout(){this.$store.commit("setFingerprint",!1),this.$store.commit("setSession",!1),this.$router.push({name:"home"})},toggleTheme(){this.$store.commit("setTheme","dark"===this.theme?"light":"dark")}},watch:{$route(e){this.currentRoute=e.name}}}),g=f,y=(s("b196"),Object(u["a"])(g,m,v,!1,null,null,null)),b=y.exports,k=function(){var e=this,t=e._self._c;return e.session?t("div",{style:"width:"+e.sidebarWidth+"px",attrs:{id:"sidebar"}},[t("div",{staticClass:"sidebar-outer-wrapper-outer"},[t("div",{staticClass:"sidebar-outer-wrapper"},[t("div",{staticClass:"sidebar-inner-wrapper"},[t("div",{staticClass:"sidebar-inner-wrapper-inner"},[t("div",{class:e.sidebarCollapse?"sidebar":"sidebar collapse"},[t("a",{class:e.sidebarCollapse?"collapse-sidebar collapsed":"collapse-sidebar",attrs:{title:e.sidebarCollapse?"Collapse sidebar.":"Expand sidebar."},on:{click:function(t){return e.toggleCollapse()}}}),t("div",{class:e.storesDropdown?"sidebar-shortcuts dropdown open store-length-"+e.stores.length:"sidebar-shortcuts dropdown store-length-"+e.stores.length,on:{click:function(t){e.storesDropdown=!e.storesDropdown}}},[(!e.activeStore||"false"===e.activeStore)&&e.stores.length>1?[e._m(0)]:e._e(),e._l(e.stores,(function(s){return[e.activeStore==s.store_id?[t("div",{key:s.store_id,staticClass:"sidebar-shortcut active",on:{click:function(t){e.activeStore!=s.store_id&&e.openStore(s.store_id)}}},[t("span",{staticClass:"store-flag"},[t("i",{style:"background: #"+s.store_colour}),t("i",{style:"background: #"+s.store_accent_colour})]),t("span",{staticClass:"collapsible"},[t("span",{staticClass:"text"},[e._v(e._s(e.decodedString(s.store_name)))]),t("span",{class:"badge "+s.network},[e._v(" "+e._s(s.network)+" ")])])])]:e._e(),e.activeStore!=s.store_id&&e.storesDropdown?[t("div",{key:s.store_id,staticClass:"sidebar-shortcut",on:{click:function(t){e.activeStore!=s.store_id&&e.openStore(s.store_id)}}},[t("span",{staticClass:"store-flag"},[t("i",{style:"background: #"+s.store_colour}),t("i",{style:"background: #"+s.store_accent_colour})]),t("span",{staticClass:"collapsible"},[t("span",{staticClass:"text"},[e._v(e._s(e.decodedString(s.store_name)))]),t("span",{class:"badge "+s.network},[e._v(" "+e._s(s.network)+" ")])])])]:e._e()]}))],2),t("div"),e.activeStore&&"false"!==e.activeStore?t("div",{staticClass:"sidebar-shortcuts"},[t("a",{class:"overview"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.summaryView()}}},[t("i",{staticClass:"fas fa-chart-area"}),t("span",{staticClass:"collapsible"},[e._v("Store Overview")])]),t("a",{class:"settings"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.settingsView()}}},[t("i",{staticClass:"fas fa-sliders-h"}),t("span",{staticClass:"collapsible"},[e._v("Manage Store")])]),t("a",{class:"wallet"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.walletView()}}},[t("i",{staticClass:"fas fa-wallet"}),t("span",{staticClass:"collapsible"},[e._v("Wallet")])]),t("a",{class:"buttons"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.assetsView()}}},[t("i",{staticClass:"fas fa-code"}),t("span",{staticClass:"collapsible"},[e._v("Payment Assets")])]),t("a",{class:"invoices"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.invoicesView()}}},[t("i",{staticClass:"fas fa-file-invoice"}),t("span",{staticClass:"collapsible"},[e._v("Invoices")])]),t("a",{class:"requests"==e.storeView?"sidebar-shortcut active-bar":"sidebar-shortcut",on:{click:function(t){return e.requestsView()}}},[t("i",{staticClass:"fas fa-inbox"}),t("span",{staticClass:"collapsible"},[e._v("Payment Requests")])])]):e._e(),t("div"),t("div",{staticClass:"sidebar-shortcuts"},[t("a",{staticClass:"sidebar-shortcut",on:{click:function(t){return e.newStore()}}},[t("i",{staticClass:"fas fa-plus"}),t("span",{staticClass:"collapsible"},[e._v("Create New Store")])])])])])])])])]):e._e()},w=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebar-shortcut active"},[t("i",{staticClass:"fas fa-hand-pointer"}),t("span",{staticClass:"collapsible"},[t("span",{staticClass:"text"},[e._v(" Select Store ")])])])}],_={name:"Sidebar",data(){return{storesDropdown:!1,sidebarWidth:!1}},computed:{...Object(c["b"])({session:"session",stores:"stores",sidebarCollapse:"sidebarCollapse",activeStore:"activeStore",storeView:"storeView"})},watch:{storesDropdown(){},sidebarCollapse(){}},async created(){let e=await this.$store.dispatch("verifySession");e||(console.log("NO SESSION"),this.$store.commit("setStores",!1))},mounted(){document.getElementById("main")&&document.documentElement.style.setProperty("--main",document.getElementById("main").getBoundingClientRect().width+"px"),this.activeStore||"false"===this.activeStore||(this.$store.commit("setActiveStore",!1),this.$store.commit("setStoreView",!1),this.$store.commit("setViewTitle",!1))},methods:{setSidebarWidth(){setTimeout(()=>{this.sidebarWidth=document.querySelector(".sidebar").getBoundingClientRect().width},20)},decodedString(e){return decodeURIComponent(decodeURI(e))},toggleCollapse(){this.$store.commit("setSidebarCollapse",!this.sidebarCollapse),document.getElementById("main")&&document.documentElement.style.setProperty("--main",document.getElementById("main").getBoundingClientRect().width+"px")},openStore(e){this.$store.commit("setActiveStore",e),this.$store.commit("setStoreView","overview"),this.$store.commit("setViewTitle","Store Overview")},summaryView(){this.$store.commit("setStoreView","overview"),this.$store.commit("setViewTitle","Store Overview")},settingsView(){this.$store.commit("setStoreView","settings"),this.$store.commit("setViewTitle","Manage Store")},walletView(){this.$store.commit("setStoreView","wallet"),this.$store.commit("setViewTitle","Wallet")},assetsView(){this.$store.commit("setStoreView","buttons"),this.$store.commit("setViewTitle","Payment Assets")},invoicesView(){this.$store.commit("setStoreView","invoices"),this.$store.commit("setViewTitle","Invoices")},requestsView(){this.$store.commit("setStoreView","requests"),this.$store.commit("setViewTitle","Payment Requests")},newStore(){this.$store.commit("setStoreModalView","new")}}},C=_,S=(s("8e27"),s("eb67"),Object(u["a"])(C,k,w,!1,null,"456da80e",null)),x=S.exports;window.chatwootSettings={hideMessageBubble:!1,position:"right",locale:"en",type:"expanded_bubble"},function(e,t){var s="https://chatwoot.flat18.co.uk",i=e.createElement(t),a=e.getElementsByTagName(t)[0];i.src=s+"/packs/js/sdk.js",i.defer=!0,i.async=!0,a.parentNode.insertBefore(i,a),i.onload=function(){window.chatwootSDK.run({websiteToken:"hnTuzkVigbDMgmCC4SYz7V1Y",baseUrl:s})}}(document,"script");var P,T,I={name:"ChatWoot"},j=I,N=Object(u["a"])(j,P,T,!1,null,null,null),E=N.exports,A=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal",on:{click:function(t){return e.closeModal()}}},[t("div",{staticClass:"modal-input"},[t("div",{class:e.working?"form working":"form",on:{click:function(e){e.stopPropagation()}}},[t("h1",[e._v("Create New Store")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.storeNameConfirmed?e._e():t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Store Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.storeName,expression:"storeName"}],attrs:{type:"text",placeholder:"E.g. Donations"},domProps:{value:e.storeName},on:{input:function(t){t.target.composing||(e.storeName=t.target.value)}}}),t("span",{staticClass:"help-text"},[e._v("This name will appear on invoices, financial reports and on the F18 Pay Dashboard.")])]),t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Store Type: "),t("span",{class:"badge "+e.storeType},[e._v(e._s(e.storeType))])]),t("div",{staticClass:"switch"},[t("a",{class:"btc"==e.storeType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.storeType="btc"}}},[t("i",{staticClass:"fab fa-bitcoin"}),e._v(" Bitcoin")]),t("a",{class:"eth"==e.storeType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.storeType="eth"}}},[t("i",{staticClass:"fab fa-ethereum"}),e._v(" Ethereum")])]),t("span",{staticClass:"help-text"},[e._v("A F18 Pay Store can collect either Bitcoin or Ethereum only. To enable your payees to choose between BTC and ETH (including ERC-20 Tokens) you should create multiple stores and setup currency-switching in the store settings.")])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){return t.stopPropagation(),e.closeModal()}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Cancel")]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.checkStoreName()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]),"btc"==e.storeType?[e.storeNameConfirmed&&e.zpubOptions&&!e.collectZpub&&!e.confirmAddresses?t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Address Derivation")]),t("div",{staticClass:"switch"},[t("a",{class:"external"==e.addressDerivationType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.addressDerivationType="external"}}},[e._v("External")]),t("a",{class:"internal"==e.addressDerivationType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.addressDerivationType="internal"}}},[e._v("Internal")])]),e._m(0)]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){return t.stopPropagation(),e.backToStart()}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.setAddressDerivationType()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e(),e.storeNameConfirmed&&e.zpubOptions&&e.collectZpub&&!e.confirmAddresses?t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Native SegWit zpub")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.zpub,expression:"zpub"}],attrs:{type:"text",placeholder:"E.g. zpub6nALs1VXMgnQF7eU35PHhB..."},domProps:{value:e.zpub},on:{input:function(t){t.target.composing||(e.zpub=t.target.value)}}}),t("span",{staticClass:"help-text"},[e._v("For Electrum wallets; Menu > Wallet > Information > Master Public Key.")])]),e._m(1),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){t.stopPropagation(),e.collectZpub=!1}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.submitZpub()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e(),e.storeNameConfirmed&&e.zpubOptions&&e.collectZpub&&e.confirmAddresses?t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Wallet Addresses")]),t("ol",e._l(e.confirmAddresses,(function(s,i){return t("li",{key:i},[e._v(e._s(s))])})),0),t("span",{staticClass:"help-text"})]),e._m(2),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){t.stopPropagation(),e.confirmAddresses=!1}}},[t("i",{staticClass:"fas fa-arrow-left"})]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.confirmAddressesMatchWallet()}}},[e._v("Confirm Addresses"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e()]:e._e(),"eth"==e.storeType?[e.storeNameConfirmed&&e.zpubOptions?t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:"storeName"}},[e._v("Ethereum Account Address")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.zpub,expression:"zpub"}],attrs:{type:"text",placeholder:"E.g. 0x1d15114cbF4c55c7f001a8b7..."},domProps:{value:e.zpub},on:{input:function(t){t.target.composing||(e.zpub=t.target.value)}}}),t("span",{staticClass:"help-text"},[e._v("You can use any valid Ethereum address account from your wallet.")])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){t.stopPropagation(),e.storeNameConfirmed=!1}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.submitZpub()}}},[e._v("Finish"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e()]:e._e()],2)])])},D=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"help-text"},[e._v("You can use your own (external) wallet with F18 Pay as long as the addresses are Native SegWit."),t("br"),e._v("If you'd like to use randomly generated addresses for your store invoices choose 'Internal' and we'll generate key pairs which you can sweep at any time.")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"sub-sect compact"},[t("span",{staticClass:"help-text"},[e._v("F18 Pay will "),t("b",[e._v("only")]),e._v(" be able to generate addresses and check balances for your wallet."),t("br"),e._v("We recommend that you use a dedicated wallet for F18 Pay to avoid untracked transactions on your addresses.")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"sub-sect compact"},[t("span",{staticClass:"help-text"},[e._v("Confirm that the addresses above match the "),t("b",[e._v("first 10")]),e._v(" addresses on your wallet."),t("br"),e._v("For Wasabi wallet, you may need to generate 10 addresses manually (under the 'receive' tab).")])])}],R={name:"NewStoreModal",data(){return{working:!1,message:!1,storeNameConfirmed:!1,storeName:"",storeType:"btc",zpub:"",collectZpub:!1,addressDerivationType:"external",confirmAddresses:!1,zpubOptions:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",stores:"stores"})},created(){window.scrollTo({top:0,behavior:"smooth"})},methods:{async checkStoreName(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURI(this.storeName),keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/new-store-type-name-check",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,storeType:this.storeType,fingerprint:this.fingerprint,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?(!e.extra&&e.currentStore?(this.$store.commit("setActiveStore",e.currentStore),this.complete()):"zpub"==e.extra&&(this.zpubOptions=!0),this.storeNameConfirmed=!0):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async setStoreLocal(e,t){let s=[];for(const i of this.stores){let a=i;i.store_id==this.activeStore&&(a[e]=i[t]),s.push(a)}this.$store.commit("setStores",s)},closeModal(){this.$store.commit("setStoreModalView",!1)},async setAddressDerivationType(){if("external"===this.addressDerivationType&&(this.collectZpub=!0),"internal"===this.addressDerivationType){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.storeName,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/new-store-derivation-internal",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,storeType:this.storeType,fingerprint:this.fingerprint,keyivId:this.keyivId,addressDerivationType:this.addressDerivationType})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed&&(e.currentStore?(this.$store.commit("setActiveStore",e.currentStore),this.complete()):this.message=e.debug?e.debug:"There was a problem with the information provided."),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},async submitZpub(){this.working=!0;let e=/^[A-Za-z0-9]+$/;if(!this.zpub.match(e))return this.working=!1,this.message="zpub does not appear to be valid",!1;this.message="Validating...";const t=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.storeName,keyiv:this.keyiv}),i=await this.$store.dispatch("encrypt",{string:this.zpub,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/new-store-query-zpub",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:t,storeName:s,storeType:this.storeType,fingerprint:this.fingerprint,keyivId:this.keyivId,zpub:i})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?"confirm-addresses"==e.extra&&e.confirmAddresses?this.confirmAddresses=e.confirmAddresses:e.currentStore&&(this.$store.commit("setActiveStore",e.currentStore),this.complete()):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async confirmAddressesMatchWallet(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.zpub,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/new-store-confirm-bitcoin-zpub-addresses-match",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,storeType:this.storeType,fingerprint:this.fingerprint,keyivId:this.keyivId,zpub:s})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?!e.extra&&e.currentStore&&(this.$store.commit("setActiveStore",e.currentStore),this.complete()):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},backToStart(){this.zpubOptions=!1,this.collectZpub=!1,this.storeNameConfirmed=!1,this.working=!1},complete(){this.$store.dispatch("getStores"),this.closeModal()}}},O=R,F=Object(u["a"])(O,A,D,!1,null,null,null),J=F.exports,U={name:"App",components:{Header:b,Footer:p,Sidebar:x,NewStoreModal:J,ChatWoot:E},computed:{...Object(c["b"])({theme:"theme",session:"session",storeModalView:"storeModalView",viewTitle:"viewTitle"})},watch:{$route:function(){this.initChecks()}},async created(){this.$store.dispatch("init"),this.$store.dispatch("verifySession",!1)},mounted(){document.getElementById("main").addEventListener("scroll",this.scrollUITriggers);let e=this;window.addEventListener("focus",e.verifySession)},methods:{async initChecks(){this.$store.dispatch("init"),this.$store.dispatch("verifySession",!1)},verifySession(){console.log("verifying session"),this.$store.dispatch("verifySession",!1)},scrollUITriggers(){document.getElementById("main").scrollTop>80&&this.viewTitle?this.$store.commit("setShowTitle",!0):this.$store.commit("setShowTitle",!1)}}},q=U,M=(s("06f1"),s("411a"),Object(u["a"])(q,a,r,!1,null,null,null)),z=M.exports,V=s("8c4f"),H=function(){var e=this,t=e._self._c;return t("div",{staticClass:"no-animate"},[t("div",{staticClass:"container hero"},[t("svg",{attrs:{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 175 118",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("clipPath",{attrs:{id:"hero_a"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m328.611 7.654h174.006v117.494h-174.006z"}})]),t("clipPath",{attrs:{id:"hero_b"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m-77.242 58.476h174.006v117.494h-174.006z"}})]),t("clipPath",{attrs:{id:"hero_c"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}})]),t("clipPath",{attrs:{id:"hero_d"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}})]),t("g",{attrs:{transform:"translate(-328.610824 -7.654229)"}},[t("path",{attrs:{d:"m328.611 7.654h174.006v117.494h-174.006z",fill:"none"}}),t("g",{attrs:{"clip-path":"url(#hero_a)"}},[t("g",{attrs:{transform:"translate(406.464 -50.1679)"}},[t("path",{attrs:{d:"m-77.242 58.476h174.006v117.494h-174.006z",fill:"none"}}),t("g",{attrs:{"clip-path":"url(#hero_b)"}},[t("g",{attrs:{transform:"matrix(.695082 0 0 .695083 -114.411 8.72384)"}},[t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z",fill:"none"}}),t("g",{attrs:{"clip-path":"url(#hero_c)",fill:"var(--black)"}},[t("path",{attrs:{d:"m146.599 88.576c0 32.879-26.693 59.572-59.572 59.572-17.03 0-32.399-7.163-43.261-18.636l-9.092 8.608c13.144 13.883 31.745 22.548 52.353 22.548 39.789 0 72.092-32.303 72.092-72.092z",transform:"matrix(1.8383 0 0 1.8383 -83.7675 -82.1042)"}}),t("path",{attrs:{d:"m87.027 11.109c-42.755 0-77.467 34.712-77.467 77.467s34.712 77.467 77.467 77.467 77.467-34.712 77.467-77.467-34.712-77.467-77.467-77.467zm0 23.27c29.912 0 54.197 24.285 54.197 54.197s-24.285 54.197-54.197 54.197-54.197-24.285-54.197-54.197 24.285-54.197 54.197-54.197z",transform:"matrix(.989007 0 0 .989007 -4.79082 -6.87718)"}})]),t("path",{attrs:{d:"m100-.963c-55.722 0-100.963 45.241-100.963 100.963 0 0 0 95.174.026 139.387 0 8.94 4.267 17.35 11.488 22.633 7.221 5.282 16.528 6.804 25.054 4.096.038-.012.075-.024.112-.036 29.655-9.754 82.478-31.084 120.057-67.4 26.295-25.412 45.189-57.998 45.189-98.68 0-55.722-45.241-100.963-100.963-100.963zm0 23.02c43.018 0 77.943 34.925 77.943 77.943 0 42.748-25.644 74.426-56.243 97.495-32.19 24.269-70.136 39.134-93.105 46.694-1.52.467-3.17.19-4.452-.749-1.295-.947-2.06-2.455-2.06-4.06 0-.002 0-.005 0-.007-.026-44.209-.026-139.373-.026-139.373 0-43.018 34.925-77.943 77.943-77.943z",fill:"var(--dark)"}})]),t("g",{attrs:{transform:"matrix(.492143 -.490852 .490852 .492143 -27.3901 167.629)"}},[t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z",fill:"none"}}),t("g",{attrs:{"clip-path":"url(#hero_d)",fill:"var(--black)"}},[t("path",{attrs:{d:"m146.599 88.576c0 32.879-26.693 59.572-59.572 59.572-17.03 0-32.399-7.163-43.261-18.636l-9.092 8.608c13.144 13.883 31.745 22.548 52.353 22.548 39.789 0 72.092-32.303 72.092-72.092z",transform:"matrix(1.8383 0 0 1.8383 -83.7675 -82.1042)"}}),t("path",{attrs:{d:"m87.027 11.109c-42.755 0-77.467 34.712-77.467 77.467s34.712 77.467 77.467 77.467 77.467-34.712 77.467-77.467-34.712-77.467-77.467-77.467zm0 23.27c29.912 0 54.197 24.285 54.197 54.197s-24.285 54.197-54.197 54.197-54.197-24.285-54.197-54.197 24.285-54.197 54.197-54.197z",transform:"matrix(.989007 0 0 .989007 -4.79082 -6.87718)"}})]),t("path",{attrs:{d:"m100-.963c-55.722 0-100.963 45.241-100.963 100.963 0 0 0 95.174.026 139.387 0 8.94 4.267 17.35 11.488 22.633 7.221 5.282 16.528 6.804 25.054 4.096.038-.012.075-.024.112-.036 29.655-9.754 82.478-31.084 120.057-67.4 26.295-25.412 45.189-57.998 45.189-98.68 0-55.722-45.241-100.963-100.963-100.963zm0 23.02c43.018 0 77.943 34.925 77.943 77.943 0 42.748-25.644 74.426-56.243 97.495-32.19 24.269-70.136 39.134-93.105 46.694-1.52.467-3.17.19-4.452-.749-1.295-.947-2.06-2.455-2.06-4.06 0-.002 0-.005 0-.007-.026-44.209-.026-139.373-.026-139.373 0-43.018 34.925-77.943 77.943-77.943z",fill:"var(--dark)"}})])])])])])]),e._m(0)]),e._m(1),e._m(2)])},L=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hero-focus"},[t("h1",[e._v("Start Accepting Crypto Payments Online for FREE 🎉")]),t("p",[e._v("F18 Pay is completely free to use."),t("br"),e._v("We "),t("b",[t("u",[e._v("NEVER")])]),e._v(" use KYC or cookies.")]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn pri",attrs:{href:"signup"}},[e._v("Get Started"),t("i",{staticClass:"fas fa-arrow-right"})]),t("a",{staticClass:"btn sec",attrs:{href:"#more"}},[e._v("Learn More"),t("i",{staticClass:"fas fa-arrow-down"})])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"container flex",attrs:{id:"more"}},[t("div",[t("h2",[e._v("You're our everything and you're nobody 👏")]),t("p",[e._v("We built this software for our use and we want you to love using it and help us make it better for everyone. As much as we love you, we don't want to know who you are or where your money is.")])]),t("div",[t("h2",[e._v("A button like this could be on your website 🔥")]),t("p",[e._v("Generate Invoices effortlessly and get paid directly to your own, private crypto wallet"),t("sup",[e._v("*")])]),t("form",{attrs:{target:"_blank",method:"GET",action:"https://pay.flat18.co.uk/api/v1/invoices/"}},[t("input",{attrs:{type:"hidden",name:"store_id",value:"I1wxWgfpeUCfsIKSx9sqvLvdGXCKUqTKGt8EXDUkdZbsgouxUInNLrxQEyK1b3R6P0cAGhT6YFjNvd1V3RMTe6RwB6SDOay1eOdgDgLVSUXljlsI83QNOcZJDRdbnqnFnLhrwL87exLP9ymIgP0HMfeT59OiVApX4BROH4xV1G61KhkViIFXzrbfTPM73YObf6kUQODIyzqod778Ya62YYZ6elWIu1lksZsdggkcRneN5VqR4dHsClu75b3hHKXoPWzTHPgKbdf1YqdvlCgio4iG6lwZ9zDB2cCf4bAVFP3BRN7hRjaoDkLbAWg37iNYxN4rjaWpCp0zDPDHJUWGTY7l49hdU7YOoS2IuvFzRkAyti2uE8eurgUU2XRIV4Hb9SfA4AirZT2PMOWbxhzftomYYbpZgnMHagkHsAX80z70lwosOoufnjmNvErZNvTwP6buMVXcHI6FCv1ZOX4LqaM4GpLwMXhfjpFMqWZiBzxmWpZL574n3DEFVNgELd9z"}}),t("input",{attrs:{type:"hidden",name:"redirectURL",value:""}}),t("input",{attrs:{type:"hidden",name:"price",value:"10"}}),t("input",{attrs:{type:"hidden",name:"currency",value:"GBP"}}),t("button",{staticClass:"payment-gateway-default-button-01",staticStyle:{width:"200px",background:"#0091ff",color:"#eee",border:"0","font-size":"14px","font-family":"'Arial', sans-serif","border-radius":"100px",padding:"15px 20px","max-width":"calc(200px - 40px)","line-height":"14px"},attrs:{name:"submit",alt:"Click here to complete this payment."}},[e._v("Pay with F18 ")])])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"container a4x4-grid"},[t("div",[t("h2",[e._v("Why build it? 🤷")]),t("p",[e._v("F18 Pay is modelled on the payment processor stack, "),t("a",{attrs:{href:"https://btcpayserver.org",target:"_blank"}},[e._v("BTCPay Server")]),e._v(".")]),t("p",[e._v("We wanted to design a payments platform that essentially operates like BTCPay Server but had more flexibility for managed services.")])]),t("div",[t("h2",[e._v("Simple anonymity 🧬")]),t("p",[e._v("Addresses generated internally are generic and random giving them basic anonymity over traditional hierarchical deterministic addresses.")])]),t("div",[t("h2",[e._v("The Primary Difference 🍏🍊")]),t("p",[e._v("Privacy: Like with any third-party service, using F18 Pay requires a degree of trust. We never share any of the data we collect from you or your transactions and we supply all aspects of the processor stack in-house.")]),t("p",[e._v("Use BTCPay Server to have full control over the installation and management of the processor stack.")])]),t("div",[t("h2",[e._v("How it works 🚀")]),t("p",[e._v("We use a PHP backend to interface with our bitcone node and query transactions.")]),t("p",[e._v("The service doesn't monitor your keys outside the scope of invoices generated so your past and external activity stay private.")])]),t("div",[t("h2",[e._v("Good to know 🧠")]),t("p",[e._v("This is a centralised Payment gateway service, written in PHP and provided free of charge with no guarantees. You can set up as many stores as you like and process as many payments as needed.")])])])}],B={name:"Home"},W=B,$=(s("0b69"),Object(u["a"])(W,H,L,!1,null,null,null)),G=$.exports,Q=function(){var e=this,t=e._self._c;return t("div",["login"===e.type?t("div",{class:e.working?"form working":"form"},[t("h1",[e._v("Log in")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.usernameConfirmed?e._e():t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],ref:"username",attrs:{type:"text",placeholder:"email@example.com",autofocus:""},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkUsername()},input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"invisible",attrs:{type:"password",placeholder:"",value:"false"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",on:{click:function(t){return e.checkUsername()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])]),t("div",{staticClass:"centre"},[t("router-link",{staticClass:"link",attrs:{to:{name:"reset-password"},title:"Reset your password"}},[e._v("Password reset")])],1),t("div",{staticClass:"centre"},[t("router-link",{staticClass:"link",attrs:{to:{name:"signup"},title:"Signup for F18 Pay"}},[e._v("Sign up")])],1)]),e.usernameConfirmed?t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"invisible",attrs:{type:"text",placeholder:"username",disabled:"disabled"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("div",{staticClass:"input-placeholder"},[e._v(" "+e._s(e.username)+" "),t("i",{staticClass:"fas fa-check-circle good"})]),t("label",{attrs:{for:"password"}},[e._v("password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"",autofocus:""},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkPassword()},input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){e.usernameConfirmed=!1}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkPassword()}}},[e._v("Login"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e()]):e._e()])},X=[],Z=s("b73b"),K=s.n(Z);i["a"].use(K.a);var Y={name:"Login",data(){return{type:"login",keyiv:!1,keyivId:!1,password:"",username:"",usernameConfirmed:!1,message:!1,working:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",session:"session"})},methods:{encrypt(e){let t=this.keyiv.substr(0,32);t=this.CryptoJS.SHA256(t).toString(this.CryptoJS.enc.Hex).substr(0,32);let s=this.keyiv.substr(33);s=this.CryptoJS.SHA256(s).toString(this.CryptoJS.enc.Hex).substr(0,16);const i=this.CryptoJS.AES.encrypt(e,this.CryptoJS.enc.Utf8.parse(t),{iv:this.CryptoJS.enc.Utf8.parse(s)}).toString();return i},checkUsername(){if(this.message=!1,this.working=!0,this.username&&0!=this.username.length){const e=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/check-username",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.usernameConfirmed=e.usernameConfirmed,!0!==e.usernameConfirmed?(this.$store.commit("setUser",!1),this.message="User does not exist"):this.$store.commit("setUser",this.username),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Please enter your account email address"},checkPassword(){this.message=!1,this.working=!0;const e=this.encrypt(this.password),t=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/password-login",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:t,password:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{1==e.proceed&&e.fingerprint?(this.$store.commit("setUser",this.username),this.$store.commit("setFingerprint",e.fingerprint),this.$router.push("dashboard")):(this.$store.commit("setUser",!1),this.usernameConfirmed=!1,this.message="Check your login credentials and try again."),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},mounted(){this.$refs.username.$el&&this.$refs.username.$el.focus()},async created(){this.session?this.$router.push("dashboard"):fetch("https://f18pay-api.flat18.co.uk/get-keyiv",{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.json()).then(e=>{this.keyiv=e.keyiv,this.keyivId=e.keyivId,this.$store.commit("setKeyivId",[e.keyivId,e.keyiv])}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},ee=Y,te=(s("586b"),Object(u["a"])(ee,Q,X,!1,null,null,null)),se=te.exports,ie=function(){var e=this,t=e._self._c;return t("div",["sign-up"===e.type?t("div",{class:e.working?"form working":"form"},[t("h1",[e._v("Sign up")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.usernameConfirmed?e._e():t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"email",placeholder:"email@example.com"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkUsername()},input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("div",{staticClass:"flex"},[t("router-link",{staticClass:"btn sec",attrs:{to:{name:"login"},title:"Log in to your account"}},[t("i",{staticClass:"fas fa-arrow-circle-left"}),e._v("Log in")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkUsername()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])],1)]),e.usernameConfirmed?t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"invisible",attrs:{type:"text",placeholder:"username",disabled:"disabled"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("div",{staticClass:"input-placeholder"},[e._v(" "+e._s(e.username)+" "),t("i",{staticClass:"fas fa-check-circle good"})]),t("label",{attrs:{for:"password"}},[e._v("password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("confirm password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password2},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkPassword()},input:function(t){t.target.composing||(e.password2=t.target.value)}}}),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){e.usernameConfirmed=!1}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkPassword()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e(),e.serverMessage?t("p",[t("small",[e._v(e._s(e.serverMessage))])]):e._e()]):e._e()])},ae=[];i["a"].use(K.a);var re={name:"Signup",data(){return{type:"sign-up",keyiv:!1,keyivId:!1,password:"",password2:"",username:"",usernameConfirmed:!1,message:!1,working:!1,serverMessage:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",session:"session"})},methods:{encrypt(e){let t=this.keyiv.substr(0,32);t=this.CryptoJS.SHA256(t).toString(this.CryptoJS.enc.Hex).substr(0,32);let s=this.keyiv.substr(33);s=this.CryptoJS.SHA256(s).toString(this.CryptoJS.enc.Hex).substr(0,16);const i=this.CryptoJS.AES.encrypt(e,this.CryptoJS.enc.Utf8.parse(t),{iv:this.CryptoJS.enc.Utf8.parse(s)}).toString();return i},checkUsername(){if(this.message=!1,this.working=!0,this.username&&0!=this.username.length){const e=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/check-username-pre-exist",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.usernameConfirmed=e.usernameConfirmed,!0!==e.usernameConfirmed&&(this.message=!!e.debug&&e.debug),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Please enter your email address"},checkPassword(){if(this.message=!1,this.working=!0,this.password===this.password2){const e=this.encrypt(this.password),t=this.encrypt(this.password2),s=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/register-new-user",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:s,password:e,password2:t,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?(this.$store.commit("setUser",this.username),this.$router.push({name:"verify-email"})):this.usernameConfirmed=!1,this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Passwords must match.",this.working=!1}},mounted(){},async created(){this.session?this.$router.push("dashboard"):fetch("https://f18pay-api.flat18.co.uk/get-keyiv",{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.json()).then(e=>{this.serverMessage=!!e.debug&&e.debug,this.keyiv=e.keyiv,this.keyivId=e.keyivId,this.$store.commit("setKeyivId",[e.keyivId,e.keyiv])}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},oe=re,ne=(s("457f"),Object(u["a"])(oe,ie,ae,!1,null,null,null)),ce=ne.exports,le=function(){var e=this,t=e._self._c;return t("div",[t("div",{class:e.working?"form working":"form"},[t("h1",[e._v("Verify Email")]),t("p",{staticClass:"help-text"},[e._v("Enter the information below to confirm your account.")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.usernameManualConfirmedBool||e.username?e._e():t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.usernameManual,expression:"usernameManual"}],attrs:{type:"email",placeholder:"email@example.com"},domProps:{value:e.usernameManual},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkUsername()},input:function(t){t.target.composing||(e.usernameManual=t.target.value)}}}),t("div",{staticClass:"flex"},[t("router-link",{staticClass:"btn sec",attrs:{to:{name:"home"}}},[t("i",{staticClass:"fas fa-times"}),e._v("Exit")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkUsername()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])],1)]),e.usernameManualConfirmedBool||e.username?t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{staticClass:"invisible",attrs:{type:"text",placeholder:e.usernameManual||e.username,disabled:"disabled"},domProps:{value:e.usernameManual||e.username}}),t("div",{staticClass:"input-placeholder"},[e._v(" "+e._s(e.usernameManual||e.username)+" "),t("i",{staticClass:"fas fa-check-circle good"})]),t("label",{attrs:{for:"code"}},[e._v("code")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:""},domProps:{value:e.code},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkCode()},input:function(t){t.target.composing||(e.code=t.target.value)}}}),t("div",{staticClass:"flex"},[t("router-link",{staticClass:"btn sec",attrs:{to:{name:"home"}}},[e._v("Exit")]),t("a",{staticClass:"btn sec",on:{click:function(t){return e.getNewCode()}}},[e._v("Get New Code"),t("i",{staticClass:"fas fa-keyboard"})]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkCode()}}},[e._v("Finish"),t("i",{staticClass:"fas fa-arrow-right"})])],1)]):e._e(),e.serverMessage?t("p",[t("small",[e._v(e._s(e.serverMessage))])]):e._e()])])},de=[];i["a"].use(K.a);var ue={name:"VerifyEmail",data(){return{type:"verify",code:"",keyiv:!1,message:!1,working:!1,serverMessage:!1,usernameManual:"",usernameManualConfirmedBool:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",session:"session",username:"user",keyivId:"keyivId"})},methods:{encrypt(e){let t=this.keyiv.substr(0,32);t=this.CryptoJS.SHA256(t).toString(this.CryptoJS.enc.Hex).substr(0,32);let s=this.keyiv.substr(33);s=this.CryptoJS.SHA256(s).toString(this.CryptoJS.enc.Hex).substr(0,16);const i=this.CryptoJS.AES.encrypt(e,this.CryptoJS.enc.Utf8.parse(t),{iv:this.CryptoJS.enc.Utf8.parse(s)}).toString();return i},checkUsername(){if(this.message=!1,this.working=!0,this.usernameManual&&0!=this.usernameManual.length){const e=this.encrypt(this.usernameManual);fetch("https://f18pay-api.flat18.co.uk/check-username-for-activation",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.usernameManualConfirmedBool=e.usernameConfirmed,!0!==e.usernameConfirmed?this.message=!!e.debug&&e.debug:this.$store.commit("setUser",this.usernameManual),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Please enter your email address"},checkCode(){if(this.message=!1,this.working=!0,this.code.length>=6&&(this.username||this.usernameManual)){const e=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/code-verify",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,code:this.code,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed&&(this.$store.commit("setUser",this.username),this.$store.commit("setFingerprint",e.fingerprint),this.$router.push({name:"dashboard"})),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Invalid code entered. Try again.",this.working=!1},getNewCode(){if(this.message=!1,this.working=!0,this.username||this.usernameManual){const e=this.username?this.encrypt(this.username):this.encrypt(this.usernameManual);fetch("https://f18pay-api.flat18.co.uk/request-new-code",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed&&(this.message="If email is valid a new code will be sent immediately."),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Email missing. Refresh this page to try again.",this.working=!1}},mounted(){},async created(){this.session?this.$router.push("dashboard"):this.keyivId||fetch("https://f18pay-api.flat18.co.uk/get-keyiv",{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.json()).then(e=>{this.serverMessage=!!e.debug&&e.debug,this.keyiv=e.keyiv,this.$store.commit("setKeyivId",[e.keyivId,e.keyiv])}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},he=ue,pe=(s("4eae"),Object(u["a"])(he,le,de,!1,null,null,null)),me=pe.exports,ve=function(){var e=this,t=e._self._c;return t("div",["sign-up"===e.type?t("div",{class:e.working?"form working":"form"},[t("h1",[e._v("Password Reset")]),t("p",{staticClass:"help-text"},[e._v("Enter the information below to confirm your account and set a new password.")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.usernameConfirmed?e._e():t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"email",placeholder:"email@example.com"},domProps:{value:e.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkUsername()},input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("div",{staticClass:"flex"},[t("router-link",{staticClass:"btn sec",attrs:{to:{name:"login"},title:"Log in to your account"}},[t("i",{staticClass:"fas fa-arrow-circle-left"}),e._v("Log in")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkUsername()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])],1)]),e.usernameConfirmed?t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"username"}},[e._v("email")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"invisible",attrs:{type:"text",placeholder:"username",disabled:"disabled"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),t("div",{staticClass:"input-placeholder"},[e._v(" "+e._s(e.username)+" "),t("i",{staticClass:"fas fa-check-circle good"})]),t("label",{attrs:{for:"password"}},[e._v("password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("label",{attrs:{for:"password"}},[e._v("confirm password")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password2,expression:"password2"}],attrs:{type:"password",placeholder:""},domProps:{value:e.password2},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.checkPassword()},input:function(t){t.target.composing||(e.password2=t.target.value)}}}),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){e.usernameConfirmed=!1}}},[t("i",{staticClass:"fas fa-arrow-left"}),e._v("Back")]),t("a",{staticClass:"btn",on:{click:function(t){return e.checkPassword()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e(),e.serverMessage?t("p",[t("small",[e._v(e._s(e.serverMessage))])]):e._e()]):e._e()])},fe=[];i["a"].use(K.a);var ge,ye,be={name:"Signup",data(){return{type:"sign-up",keyiv:!1,keyivId:!1,password:"",password2:"",username:"",usernameConfirmed:!1,message:!1,working:!1,serverMessage:!1}},computed:{...Object(c["b"])({fingerprint:"fingerprint",session:"session"})},methods:{encrypt(e){let t=this.keyiv.substr(0,32);t=this.CryptoJS.SHA256(t).toString(this.CryptoJS.enc.Hex).substr(0,32);let s=this.keyiv.substr(33);s=this.CryptoJS.SHA256(s).toString(this.CryptoJS.enc.Hex).substr(0,16);const i=this.CryptoJS.AES.encrypt(e,this.CryptoJS.enc.Utf8.parse(t),{iv:this.CryptoJS.enc.Utf8.parse(s)}).toString();return i},checkUsername(){if(this.message=!1,this.working=!0,this.username&&0!=this.username.length){const e=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/check-username-for-password-reset",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.usernameConfirmed=e.usernameConfirmed,!0!==e.usernameConfirmed&&(this.message=!!e.debug&&e.debug),this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Please enter your email address"},checkPassword(){if(this.message=!1,this.working=!0,this.password===this.password2){const e=this.encrypt(this.password),t=this.encrypt(this.password2),s=this.encrypt(this.username);fetch("https://f18pay-api.flat18.co.uk/register-new-user",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:s,password:e,password2:t,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?(this.$store.commit("setUser",this.username),this.$router.push({name:"verify-email"})):this.usernameConfirmed=!1,this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Passwords must match.",this.working=!1}},mounted(){},async created(){this.session?this.$router.push("dashboard"):fetch("https://f18pay-api.flat18.co.uk/get-keyiv",{headers:{"Content-Type":"multipart/form-data"}}).then(e=>e.json()).then(e=>{this.serverMessage=!!e.debug&&e.debug,this.keyiv=e.keyiv,this.keyivId=e.keyivId,this.$store.commit("setKeyivId",[e.keyivId,e.keyiv])}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}},ke=be,we=(s("6a0c"),Object(u["a"])(ke,ve,fe,!1,null,null,null)),_e=we.exports,Ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dashboard-root"},[e.activeStore&&"false"!==e.activeStore?e._e():t("div",{staticClass:"stores"},e._l(e.stores,(function(s,i){return t("div",{key:s.store_id,class:1==s.deleted?"store-tile disabled":"store-tile active",style:"animation-delay:"+(i+1)/10+"s;",on:{click:function(t){return e.openStore(s.store_id)}}},[t("h2",[s.store_logo?t("img",{staticClass:"store-icon",attrs:{src:s.store_logo}}):e._e(),t("span",{staticClass:"store-name-title-text"},[e._v(e._s(decodeURIComponent(decodeURI(s.store_name)))+" "),"btc"===s.network?t("i",{staticClass:"fab fa-bitcoin"}):e._e(),e._v(" "),"eth"===s.network?t("i",{staticClass:"fab fa-ethereum"}):e._e()]),t("span",{staticClass:"store-flag"},[t("i",{style:"background: #"+s.store_colour}),t("i",{style:"background: #"+s.store_accent_colour})])]),t("span",{staticClass:"store-value"},[t("span",{staticClass:"mono"},[e._v(e._s(s.sum?s.sum:"0.00"))]),s.network?t("small",{class:"badge "+s.network},[e._v(e._s(s.network.toUpperCase()))]):e._e()]),t("span",[e._v(e._s(s.zpub?"External":"Internal")+" wallet")]),t("span",{class:"badge active-"+s.deleted},[e._v(e._s(1==s.deleted?"Disabled":"Active"))])])})),0),e.activeStore&&"overview"==e.storeView?t("StoreSummary"):e._e(),e.activeStore&&"settings"==e.storeView?t("StoreSettings"):e._e(),e.activeStore&&"wallet"==e.storeView?t("WalletSettings"):e._e(),e.activeStore&&"buttons"==e.storeView?t("StoreAssets"):e._e(),e.activeStore&&"invoices"==e.storeView?t("Invoices"):e._e(),e.activeStore&&"requests"==e.storeView?t("PaymentRequest"):e._e()],1)},Se=[],xe=function(){var e=this,t=e._self._c;return e.currentStore?t("div",{staticClass:"store-management"},[t("h1",[e.currentStore.store_logo?t("img",{staticClass:"store-icon",attrs:{src:e.currentStore.store_logo}}):e._e(),t("span",[e._v(e._s(e._decode(e.currentStore.store_name)))]),t("span",{class:"badge "+e.currentStore.network},[e._v(e._s(e.currentStore.network))])]),t("h2",[e._v(e._s(e.currentStore.sum||"0.00")+" "+e._s(e.currentStore.network.toUpperCase()))]),t("small",{class:1==e.currentStore.deleted?"status bad":"status good"},[e._v(e._s(1==e.currentStore.deleted?"Disabled":"Active"))]),e._m(0),e.chart.chartData?t("div",{staticClass:"subsect"},[t("h3",[e._v("Invoice Statistics")]),t("p",{staticClass:"help-text"},[e._v("Displays paid v total invoices generated over the last 6 months.")]),e.chart.chartData&&!e.chartDestroy?t("bar-chart",{staticClass:"graph"}):e._e()],1):e._e()]):e._e()},Pe=[function(){var e=this,t=e._self._c;return t("p",{staticClass:"help-text"},[t("i",{staticClass:"fas fa-info-circle"}),e._v(" F18Pay only monitors incoming transactions on addresses generated on the platform."),t("br"),e._v("Your store balance will not reflect any outgoing transactions (sweeps, spends).")])}],Te=s("1fca"),Ie={extends:Te["a"],computed:{...Object(c["b"])({chart:"chart"})},async mounted(){let e={copiedData:this.chart.chartData};this.renderChart(e.copiedData,this.chart.options)}},je=Ie,Ne=Object(u["a"])(je,ge,ye,!1,null,null,null),Ee=Ne.exports,Ae={name:"StoreSummary",components:{BarChart:Ee},data(){return{invoice_values:!1,invoice_values2:!1,invoice_dates:!1,chartDestroy:!1}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",chart:"chart",stores:"stores"}),currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e}},watch:{activeStore:function(e){this.fetchInvoiceValues(e)}},mounted(){document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),this.fetchInvoiceValues(this.activeStore)},methods:{_decode(e){let t=decodeURIComponent(decodeURI(e));return t},async fetchInvoiceValues(e){this.chartDestroy=!0,this.$store.commit("setChart",{chartData:!1,options:!1});const t=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-invoice-values",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:t,fingerprint:this.fingerprint,keyivId:this.keyivId,storeId:e})}).then(e=>e.json()).then(e=>{if(this.message=!!e.debug&&e.debug,1==e.proceed){let t=[],s=[],i=[];const a=(new Date).getFullYear();if(e.invoiceValues.length>0){for(const r of e.invoiceValues){let e=r.count?Number(r.count):0,o=r.count2?Number(r.count2):0,n=r.date.split(" ")[0]==a?r.date.replace(a+" ",""):r.date;t.push(e),s.push(o),i.push(n)}this.invoice_values=0!=t.length&&t,this.invoice_values2=0!=s.length&&s,this.invoice_dates=0!=i.length&&i,this.$store.commit("setChart",{chartData:{labels:this.invoice_dates,datasets:[{data:this.invoice_values,label:"Paid Invoices",backgroundColor:"#19d87f"},{data:this.invoice_values2,label:"Total Invoices",backgroundColor:"#4780fa"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!1},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]},legend:{display:!0},responsive:!0,maintainAspectRatio:!1}}),this.chartDestroy=!1}}else this.message="Failed to fetch values"}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}}},De=Ae,Re=Object(u["a"])(De,xe,Pe,!1,null,null,null),Oe=Re.exports,Fe=function(){var e=this,t=e._self._c;return t("div",{class:e.working?"store-management no-click":"store-management"},[t("div",{class:e.working?"form page working":"form page",on:{click:function(t){return t.stopPropagation(),e._null()}}},[t("h1",[t("span",[e._v("Manage Store")]),t("a",{staticClass:"btn",on:{click:function(t){return e.saveSettings()}}},[e._v("Save")])]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(0)}}},[e._v("Store Identity "),t("i",{class:0==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),0==e.accordianIndex?t("div",{staticClass:"accordian-sect"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Store Name")]),t("span",{staticClass:"help-text"},[e._v("This name will appear on invoices, financial reports and on the F18 Pay Dashboard.")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.storeName,expression:"storeName"}],attrs:{type:"text",placeholder:e._decode(e.currentStore.store_name)},domProps:{value:e.storeName},on:{input:function(t){t.target.composing||(e.storeName=t.target.value)}}})]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Store Logo")]),t("span",{staticClass:"help-text"},[e._v("This logo may appear on invoices and generated documents for your store.")]),t("figure",[t("div",{staticClass:"figure-image-holder",style:"background-image:url("+(e.storeLogoProxy||"data:image/png;base64,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")+")"}),t("div",[t("figcaption",{on:{click:function(t){return e.uploadNewImage()}}},[e._m(0),t("input",{staticClass:"invisible",attrs:{id:"imageInput",type:"file"}})]),t("br"),e.storeLogoProxy?t("figcaption",{staticClass:"delete",on:{click:function(t){e.storeLogoProxy=!1}}},[e._m(1)]):e._e()])])]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Store Colours")]),t("div",{staticClass:"flex colour-pickers"},[t("v-input-colorpicker",{style:"box-shadow: var(--dark) 0px 0px 0px 3px, #"+e.currentStore.store_colour+" -2rem 0px 0px -3px, #"+e.currentStore.store_colour+" -1rem 0px 0px -3px",model:{value:e.storePrimaryColour,callback:function(t){e.storePrimaryColour=t},expression:"storePrimaryColour"}}),t("v-input-colorpicker",{style:"margin-left:3rem;box-shadow: var(--dark) 0px 0px 0px 3px, #"+e.currentStore.store_accent_colour+" -2rem 0px 0px -3px, #"+e.currentStore.store_accent_colour+" -1rem 0px 0px -3px",model:{value:e.storeSecondaryColour,callback:function(t){e.storeSecondaryColour=t},expression:"storeSecondaryColour"}})],1),t("span",{staticClass:"help-text"},[e._v("Primary and Secondary / Accent Store colours.")])])]):e._e(),t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(1)}}},[e._v("Optional "),t("i",{class:1==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),1==e.accordianIndex?t("div",{staticClass:"accordian-sect"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Store URL")]),t("span",{staticClass:"help-text"},[e._v("Set an optional web address for your store.")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"url"}],attrs:{type:"text",placeholder:"https://www.example.com..."},domProps:{value:e.url},on:{input:function(t){t.target.composing||(e.url=t.target.value)}}})]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Store Email")]),t("span",{staticClass:"help-text"},[e._v("Set an optional email address for your store.")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"store@example.com..."},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]):e._e(),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",attrs:{id:"saveButton"},on:{click:function(t){return e.saveSettings()}}},[e._v("Save")]),0==e.deleted?t("a",{staticClass:"btn severe",on:{click:function(t){e.deleted=1}}},[e._v("Disable Store")]):e._e(),1==e.deleted?t("a",{staticClass:"btn good",on:{click:function(t){e.deleted=0}}},[e._v("Enable Store")]):e._e()])])])])},Je=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"btn"},[t("i",{staticClass:"fas fa-file-upload"}),e._v(" Set new")])},function(){var e=this,t=e._self._c;return t("a",{staticClass:"btn severe"},[t("i",{staticClass:"fas fa-times"}),e._v(" Delete")])}],Ue=s("79e8"),qe=s.n(Ue),Me={name:"StoreSettings",components:{"v-input-colorpicker":qe.a},data(){return{storeNameProxy:!1,storeLogoProxy:!1,storePrimaryProxy:!1,storeSecondaryProxy:!1,message:!1,working:!1,accordianIndex:0,deleted:!1,confirmAddresses:!1,addressesForConfirmation:!1,email:!1,url:!1,confirmCode:!1,code:""}},watch:{deleted(){this.saveSettings()},working(){this.$store.commit("setWorking",this.working)}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores"}),currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}},storePrimaryColour:{get(){return this.storePrimaryProxy?"#"+this.storePrimaryProxy:"#"+this.currentStore.store_colour},set(e){this.storePrimaryProxy=e.replace("#","")}},storeSecondaryColour:{get(){return this.storeSecondaryProxy?"#"+this.storeSecondaryProxy:"#"+this.currentStore.store_accent_colour},set(e){this.storeSecondaryProxy=e.replace("#","")}}},mounted(){let e=this;document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),document.getElementById("imageInput").addEventListener("change",(function(){if(this.files&&this.files[0]){let t=new FileReader;t.onload=function(t){e.storeLogoProxy=t.target.result,console.log(this.storeLogoProxy)},t.readAsDataURL(this.files[0])}})),this.storeLogoProxy=this.currentStore.store_logo||!1,this.url=this.currentStore.url||"",this.email=this.currentStore.email||"",this.deleted=this.currentStore.deleted?this.currentStore.deleted:0,this.$store.dispatch("headerUIAppend",[{id:"#saveButton",fn:this.saveSettings}])},methods:{_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1},uploadNewImage(){document.getElementById("imageInput").click()},accordianIndexSet(e){this.accordianIndex=this.accordianIndex==e?-1:e},async saveSettings(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.url,keyiv:this.keyiv}),i=await this.$store.dispatch("encrypt",{string:this.email,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-settings-bulk",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,storePrimaryColour:this.storePrimaryColour.replace("#",""),storeSecondaryColour:this.storeSecondaryColour.replace("#",""),logo:this.storeLogoProxy,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id,disabled:this.deleted,url:s,email:i})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?!e.extra&&e.currentStore&&(this.$store.dispatch("getStores"),this.$store.commit("setActiveStore",e.currentStore)):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}}},ze=Me,Ve=Object(u["a"])(ze,Fe,Je,!1,null,null,null),He=Ve.exports,Le=function(){var e=this,t=e._self._c;return t("div",{class:e.working?"store-management no-click":"store-management"},[t("WalletSettingsModal",{attrs:{confirmAddresses:e.confirmAddresses,addressesForConfirmation:e.addressesForConfirmation,confirmCode:e.confirmCode,code:e.code,numberOfAddressesToConfirm:e.numberOfAddressesToConfirm},on:{setConfirmAddresses:function(t){e.confirmAddresses=!1},setConfirmCode:function(t){e.confirmCode=!1},confirmAddressesMatchWallet:function(t){return e.confirmAddressesMatchWallet()}}}),t("div",{class:e.working?"form page working":"form page",on:{click:function(t){return t.stopPropagation(),e._null()}}},[t("h1",[t("span",[e._v("Wallet")]),t("span",{class:"badge "+e.currentStore.network},[e._v(e._s(e.currentStore.network))]),t("a",{staticClass:"btn",on:{click:function(t){return e.saveSettings()}}},[e._v("Save")])]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(0)}}},[e._v(e._s("eth"==e.network?"Account ":"")+"Address "+e._s("btc"==e.network?"Derivation":"")+" "),t("i",{class:0==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),0==e.accordianIndex?t("div",{staticClass:"accordian-sect"},["btc"==e.network?t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Address Derivation Type")]),t("div",{staticClass:"switch"},[t("a",{class:"external"==e.addressDerivationType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.addressDerivationType="external"}}},[e._v("External")]),t("a",{class:"internal"==e.addressDerivationType?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.addressDerivationType="internal"}}},[e._v("Internal")])]),t("span",{staticClass:"help-text"},["eth"==e.network?[e._v(" This address will be treated as your primary address for transfering payments and for linking ERC-20 Tokens. ")]:e._e(),"btc"==e.network?["external"==e.addressDerivationType?[e._v(" Only Native SegWit external wallets are supported. We recommend Electrum or Wasabi Wallet. ")]:e._e(),"internal"==e.addressDerivationType?[e._v(" Invoice Adresses will be randomly generated. You can sweep them at any time. ")]:e._e()]:e._e()],2)]):e._e(),"external"==e.addressDerivationType?t("div",{staticClass:"sub-sect"},["btc"==e.network?t("label",{attrs:{for:"storeName"}},[e._v("Native SegWit zpub")]):e._e(),"eth"==e.network?t("label",{attrs:{for:"storeName"}},[e._v("Ethereum address")]):e._e(),e.inputFocus?e._e():t("div",{staticClass:"input-placeholder actionable",on:{click:function(t){e.inputFocus=!0}}},[e._v(" "+e._s(e.zpub)+" "),e.zpub?t("i",{staticClass:"fas fa-check-circle good"}):e._e()]),e.inputFocus?t("input",{directives:[{name:"model",rawName:"v-model",value:e.zpub,expression:"zpub"}],attrs:{type:"text",placeholder:"E.g."+e.network=="btc"?"zpub6nALs1VXMgnQF7eU35PHhB...":"eth"==e.network?"0x1d15114cbF4c55c7f001a8b7...":""},domProps:{value:e.zpub},on:{input:function(t){t.target.composing||(e.zpub=t.target.value)}}}):e._e(),"btc"==e.network?t("span",{staticClass:"help-text"},[e._v("For Electrum wallets; Menu > Wallet > Information > Master Public Key.")]):e._e(),"eth"==e.network?t("span",{staticClass:"help-text"},[e._v("You can use any valid Ethereum address account from your wallet."),t("br"),t("br"),e._v("Invoice addresses are generated randomly and you will need to sweep those keys to retrieve your funds.")]):e._e()]):e._e()]):e._e(),"internal"==e.addressDerivationType||"eth"==e.network?[t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(1)}}},[e._v("Private Keys "),t("i",{class:1==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),1==e.accordianIndex?t("div",{staticClass:"accordian-sect"},["internal"==e.addressDerivationType||"eth"==e.network?t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Internal wallet keys")]),t("a",{staticClass:"btn severe",staticStyle:{"margin-right":"auto"},on:{click:function(t){return e.startRequestForKeys()}}},[t("i",{staticClass:"fas fa-download"}),e._v(" Request Keys Download")]),t("span",{staticClass:"help-text"},[e._v("Download the keys for your Store Invoices so you can manage funds in an external wallet.")])]):e._e()]):e._e()]:e._e(),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",attrs:{id:"saveButton"},on:{click:function(t){return e.saveSettings()}}},[e._v("Save")])])],2)])],1)},Be=[],We=function(){var e=this,t=e._self._c;return t("div",[e.confirmAddresses?t("div",{staticClass:"modal",on:{click:function(t){return e.closeModal()}}},[t("div",{staticClass:"modal-input"},[t("div",{class:e.working?"form page working":"form page",on:{click:function(e){e.stopPropagation()}}},[t("h1",[e._v("Confirm Addresses")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Wallet Addresses")]),t("ol",e._l(e.addressesForConfirmation,(function(s,i){return t("li",{key:i},[e._v(e._s(s))])})),0),t("span",{staticClass:"help-text"},[e._v("Confirm that the addresses above match the "),t("b",[e._v("first "+e._s(e.numberOfAddressesToConfirm))]),e._v(" addresses on your wallet."),t("br"),e._v("For Wasabi wallet, you may need to generate "+e._s(e.numberOfAddressesToConfirm)+" addresses manually (under the 'receive' tab).")])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){t.stopPropagation(),e.confirmAddresses=!1}}},[t("i",{staticClass:"fas fa-arrow-left"})]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.$emit("confirmAddressesMatchWallet")}}},[e._v("Confirm Addresses"),t("i",{staticClass:"fas fa-arrow-right"})])])])])])]):e._e(),e.confirmCode?t("div",{staticClass:"modal",on:{click:function(t){return e.$emit("setConfirmCode")}}},[t("div",{staticClass:"modal-input"},[t("div",{class:e.working?"form page working":"form page",on:{click:function(e){e.stopPropagation()}}},[t("h1",[e._v("Confirm Code")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.downloadFile?e._e():t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Enter code")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:"123456"},domProps:{value:e.code},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.verifyCode()},input:function(t){t.target.composing||(e.code=t.target.value)}}}),t("span",{staticClass:"help-text"},[e._v("We've sent a code to the email address for this F18 Pay account owner. Enter it above to download all the internal keys associated with this Store.")])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){return t.stopPropagation(),e.$emit("setConfirmCode")}}},[t("i",{staticClass:"fas fa-arrow-left"})]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.verifyCode()}}},[e._v("Verify Code"),t("i",{staticClass:"fas fa-arrow-right"})])])]),e.downloadFile?t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Download File")]),t("a",{staticClass:"btn severe",staticStyle:{"margin-right":"auto"},attrs:{href:e.downloadFile,download:"keys.csv"},on:{click:function(t){return t.stopPropagation(),e.downloaded()}}},[t("i",{staticClass:"fas fa-download"}),e._v(" Download Keys as .CSV")]),e._m(0)]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn sec",on:{click:function(t){return t.stopPropagation(),e.$emit("setConfirmCode")}}},[t("i",{staticClass:"fas fa-arrow-left"})]),t("a",{staticClass:"btn",on:{click:function(t){t.stopPropagation(),!e.working&&e.verifyCode()}}},[e._v("Verify Code"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e()])])]):e._e()])},$e=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"help-text"},[t("i",{staticClass:"fas fa-exclamation-triangle"}),e._v(" Keep these keys safe. Anyone with access to these downloaded, decrypted keys can spend any existing and future balances.")])}],Ge={name:"WalletSettingsModal",components:{},props:["addressesForConfirmation","confirmAddresses","confirmCode","code","numberOfAddressesToConfirm"],emits:["setConfirmAddresses","setConfirmCode","confirmAddressesMatchWallet"],data(){return{storeNameProxy:!1,storeLogoProxy:!1,storePrimaryProxy:!1,storeSecondaryProxy:!1,message:!1,working:!1,addressDerivationType:!1,zpub:!1,accordianIndex:0,deleted:!1,email:!1,url:!1,downloadFile:!1}},watch:{deleted(){this.saveSettings()},working(){this.$store.commit("setWorking",this.working)}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores"}),currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}},storePrimaryColour:{get(){return this.storePrimaryProxy?"#"+this.storePrimaryProxy:"#"+this.currentStore.store_colour},set(e){this.storePrimaryProxy=e.replace("#","")}},storeSecondaryColour:{get(){return this.storeSecondaryProxy?"#"+this.storeSecondaryProxy:"#"+this.currentStore.store_accent_colour},set(e){this.storeSecondaryProxy=e.replace("#","")}}},mounted(){this.storeLogoProxy=this.currentStore.store_logo||!1,this.zpub=this.currentStore.zpub||"",this.url=this.currentStore.url||"",this.email=this.currentStore.email||"",this.addressDerivationType=this.currentStore.zpub?"external":"internal",this.deleted=this.currentStore.deleted?this.currentStore.deleted:0},methods:{downloaded(){let e=this;setTimeout((function(){e.$emit("setConfirmCode"),e.code="",e.downloadFile=!1}),3e3)},async verifyCode(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.code,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-management-request-keys-verify-code",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,store_id:t,fingerprint:this.fingerprint,keyivId:this.keyivId,code:s})}).then(e=>e.json()).then(async e=>{if(this.message=!!e.debug&&e.debug,1==e.proceed){if("downloadFile"==e.extra){let t=JSON.parse(await this.$store.dispatch("decrypt",{string:e.keys,keyiv:this.keyiv})),s="data:text/csv;charset=utf-8,";for(const e of t)s+=e.private_key+",\r\n";this.downloadFile=encodeURI(s)}}else this.message=e.debug?e.debug:"There was a problem with the information provided.";this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1},uploadNewImage(){document.getElementById("imageInput").click()},accordianIndexSet(e){this.accordianIndex=this.accordianIndex==e?-1:e},async saveSettings(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.zpub,keyiv:this.keyiv}),i=await this.$store.dispatch("encrypt",{string:this.url,keyiv:this.keyiv}),a=await this.$store.dispatch("encrypt",{string:this.email,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-settings-bulk",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,storePrimaryColour:this.storePrimaryColour.replace("#",""),storeSecondaryColour:this.storeSecondaryColour.replace("#",""),logo:this.storeLogoProxy,addressDerivationType:this.addressDerivationType,zpub:s,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id,disabled:this.deleted,url:i,email:a})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?!e.extra&&e.currentStore?(this.$store.dispatch("getStores"),this.$store.commit("setActiveStore",e.currentStore)):"confirm-addresses"==e.extra&&(window.scrollTo({top:0,behavior:"smooth"}),this.setConfirmAddresses=!0,this.addressesForConfirmation=e.confirmAddresses):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},closeModal(){this.working=!1,this.setConfirmAddresses=!1}}},Qe=Ge,Xe=Object(u["a"])(Qe,We,$e,!1,null,null,null),Ze=Xe.exports,Ke={name:"WalletSettings",components:{WalletSettingsModal:Ze},data(){return{message:!1,working:!1,addressDerivationType:!1,zpub:!1,accordianIndex:0,confirmAddresses:!1,addressesForConfirmation:!1,confirmCode:!1,code:"",network:!1,numberOfAddressesToConfirm:!1,inputFocus:!1}},watch:{addressDerivationType(){this.inputFocus=!1},inputFocus(){setTimeout(()=>{document.querySelector("input").select()},200)},deleted(){this.saveSettings()},working(){this.$store.commit("setWorking",this.working)}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores"}),currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}},storePrimaryColour:{get(){return this.storePrimaryProxy?"#"+this.storePrimaryProxy:"#"+this.currentStore.store_colour},set(e){this.storePrimaryProxy=e.replace("#","")}},storeSecondaryColour:{get(){return this.storeSecondaryProxy?"#"+this.storeSecondaryProxy:"#"+this.currentStore.store_accent_colour},set(e){this.storeSecondaryProxy=e.replace("#","")}}},mounted(){document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),this.zpub=this.currentStore.zpub||"",this.network=this.currentStore.network||"",this.addressDerivationType=this.currentStore.zpub?"external":"internal",this.$store.dispatch("headerUIAppend",[{id:"#saveButton",fn:this.saveSettings}])},methods:{async startRequestForKeys(){this.working=!0,this.code="";const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-management-request-keys",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,store_id:t,fingerprint:this.fingerprint,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?"confirmCode"==e.extra&&(window.scrollTo({top:0,behavior:"smooth"}),this.confirmCode=!0):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1},accordianIndexSet(e){this.accordianIndex=this.accordianIndex==e?-1:e},async saveSettings(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.zpub,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-settings-change-zpub",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,addressDerivationType:this.addressDerivationType,zpub:t,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?!e.extra&&e.currentStore?(this.$store.dispatch("getStores"),this.$store.commit("setActiveStore",e.currentStore)):"confirm-addresses"==e.extra&&(window.scrollTo({top:0,behavior:"smooth"}),this.confirmAddresses=!0,this.addressesForConfirmation=e.confirmAddresses,this.numberOfAddressesToConfirm=e.number):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async confirmAddressesMatchWallet(){this.working=!0;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.zpub,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-settings-confirm-zpub-addresses",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,addressDerivationType:this.addressDerivationType,zpub:t,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?!e.extra&&e.currentStore?(this.$store.dispatch("getStores"),this.$store.commit("setActiveStore",e.currentStore),this.confirmAddresses=!1,this.addressesForConfirmation=!1):"confirm-addresses"==e.extra&&(this.confirmAddresses=!0,this.addressesForConfirmation=e.confirmAddresses):this.message=e.debug?e.debug:"There was a problem with the information provided.",this.working=!1}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}}},Ye=Ke,et=Object(u["a"])(Ye,Le,Be,!1,null,null,null),tt=et.exports,st=function(){var e=this,t=e._self._c;return t("div",{class:e.working?"store-management no-click":"store-management"},[e.modal.payload?t("div",{staticClass:"modal",on:{click:function(t){return e.closeModal()}}},[t("div",{staticClass:"modal-input"},[t("div",{class:e.working?"form page working":"form page",on:{click:function(e){e.stopPropagation()}}},[t("h1",[e._v(e._s(e.modal.name))]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("span",{staticClass:"help-text"},[e._v("Modify and copy the text below to embed a button on your website.")]),t("div",{staticClass:"code-block",attrs:{contenteditable:"true"},on:{click:function(e){return e.stopPropagation(),this.select()}}},[e._v(" "+e._s(e.modal.payload)+" ")])])])])])]):e._e(),t("div",{class:e.working?"form page working":"form page",on:{click:function(t){return t.stopPropagation(),e._null()}}},[e._m(0),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(0)}}},[e._v("Payment Buttons "),t("i",{class:0==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),0==e.accordianIndex?t("div",{staticClass:"accordian-sect"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Assets Currency")]),t("div",{},[t("div",{staticClass:"modern-select",on:{click:function(t){t.stopPropagation(),e.select[0].open=!e.select[0].open}}},[t("span",{staticClass:"selected"},[e._v(e._s(e.select[0].selected||"Currency")+" "),e.select[0].open?t("i",{staticClass:"fas fa-caret-up"}):t("i",{staticClass:"fas fa-caret-down"})]),e.select[0].open?t("ul",e._l(e.select[0].options,(function(s,i){return t("li",{key:i,on:{click:function(t){return t.stopPropagation(),e.modernSelect(0,s)}}},[e._v(e._s(s))])})),0):e._e()])])]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Basic Button")]),t("div",{staticClass:"button-preview",attrs:{random:e.random,id:"basicButton"}},[t("form",{attrs:{target:"_blank",method:"GET",action:"https://pay.flat18.co.uk/api/v1/invoices/"}},[t("input",{attrs:{type:"hidden",name:"store_id"},domProps:{value:e.currentStore.store_id}}),t("input",{attrs:{type:"hidden",name:"price"},domProps:{value:e.fixedPrice}}),t("input",{attrs:{type:"hidden",name:"redirectURL"},domProps:{value:e.currentStore.url}}),t("input",{attrs:{type:"hidden",name:"currency"},domProps:{value:e.select[0].selected}}),t("button",{style:"cursor:pointer;min-width: 150px;width: max-content;background: "+e.storePrimaryColour+";color:"+e.textColor+";border: 0;font-size: 14px;font-family: 'Arial', sans-serif;border-radius: 100px;padding: 15px 20px;max-width: calc(200px - 40px);line-height: 14px;transition:.1s ease;",attrs:{type:"submit",alt:"Click here to complete this payment.",onmouseenter:"this.style['background-color']='"+e.storeSecondaryColour+"';this.style.color='"+e.textAccent+"';",onmouseleave:"this.style['background-color']='"+e.storePrimaryColour+"';this.style.color='"+e.textColor+"';"}},[e._v("Pay "),t("span",{staticStyle:{display:"inline-grid","grid-template":"1fr auto / 1fr","vertical-align":"top",gap:"0","line-height":"1",position:"relative"}},[t("span",[e._v(e._s(e.fixedPrice))]),e._v(" "),t("span",{staticStyle:{"font-size":"7px",position:"absolute",bottom:"7px",width:"100%","text-align":"center",top:"100%",opacity:".5"}},[e._v(e._s(e.select[0].selected))])]),e._v(" with F18")])])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",on:{click:function(t){return e.copyCode("basicButton")}}},[e._v("Copy HTML to clipboard "),e.basicCodeCopied?t("i",{staticClass:"fas fa-check"}):e._e()]),t("a",{staticClass:"btn sec",on:{click:function(t){return e.showCode("basicButton")}}},[e._v("Show HTML Code")])]),e._m(1)]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Dynamic Button")]),t("div",{staticClass:"button-preview",attrs:{random:e.random,id:"dynamicButton"}},[t("form",{attrs:{target:"_blank",method:"GET",action:"https://pay.flat18.co.uk/api/v1/invoices/"}},[t("input",{attrs:{type:"hidden",name:"store_id"},domProps:{value:e.currentStore.store_id}}),t("input",{staticClass:"priceValue",attrs:{type:"hidden",name:"price"},domProps:{value:e.fixedPrice}}),t("input",{attrs:{type:"hidden",name:"redirectURL"},domProps:{value:e.currentStore.url}}),t("input",{attrs:{type:"hidden",name:"currency"},domProps:{value:e.select[0].selected}}),t("div",[t("a",{style:"margin-right:.5rem;cursor:pointer;min-width: 150px;width: max-content;background: "+e.storePrimaryColour+";color: "+e.textColor+";border: 0;font-size: 14px;font-family: 'Arial', sans-serif;border-radius: 100px;padding: 15px 20px;max-width: calc(200px - 40px);line-height: 14px;transition:.1s ease;",attrs:{alt:"Increase value",onmouseenter:"this.style['background-color']='"+e.storeSecondaryColour+"';this.style.color='"+e.textAccent+"';",onmouseleave:"this.style['background-color']='"+e.storePrimaryColour+"';this.style.color='"+e.textColor+"';",onclick:"this.parentNode.parentNode.querySelector('.priceValue').value=Number(this.parentNode.parentNode.querySelector('.priceValue').value)+1;this.parentNode.querySelector('.priceValueDisplay').innerHTML=Number(this.parentNode.querySelector('.priceValueDisplay').innerHTML)+1;"}},[e._v("+")]),t("button",{style:"cursor:pointer;min-width: 150px;width: max-content;background: "+e.storePrimaryColour+";color: "+e.textColor+";border: 0;font-size: 14px;font-family: 'Arial', sans-serif;border-radius: 100px;padding: 15px 20px;max-width: calc(200px - 40px);line-height: 14px;transition:.1s ease;",attrs:{type:"submit",alt:"Click here to complete this payment.",onmouseenter:"this.style['background-color']='"+e.storeSecondaryColour+"';this.style.color='"+e.textAccent+"';",onmouseleave:"this.style['background-color']='"+e.storePrimaryColour+"';this.style.color='"+e.textColor+"';"}},[e._v("Pay "),t("span",{staticStyle:{display:"inline-grid","grid-template":"1fr auto / 1fr","vertical-align":"top",gap:"0","line-height":"1",position:"relative"}},[t("span",{staticClass:"priceValueDisplay"},[e._v(e._s(e.fixedPrice))]),e._v(" "),t("span",{staticStyle:{"font-size":"7px",position:"absolute",bottom:"7px",width:"100%","text-align":"center",top:"100%",opacity:".5"}},[e._v(e._s(e.select[0].selected))])]),e._v(" with F18")]),t("a",{style:"margin-left:.5rem;cursor:pointer;min-width: 150px;width: max-content;background: "+e.storePrimaryColour+";color: "+e.textColor+";border: 0;font-size: 14px;font-family: 'Arial', sans-serif;border-radius: 100px;padding: 15px 20px;max-width: calc(200px - 40px);line-height: 14px;transition:.1s ease;",attrs:{alt:"Increase value",onmouseenter:"this.style['background-color']='"+e.storeSecondaryColour+"';this.style.color='"+e.textAccent+"';",onmouseleave:"this.style['background-color']='"+e.storePrimaryColour+"';this.style.color='"+e.textColor+"';",onclick:"this.parentNode.parentNode.querySelector('.priceValue').value=Number(this.parentNode.parentNode.querySelector('.priceValue').value)-1||1;this.parentNode.querySelector('.priceValueDisplay').innerHTML=Number(this.parentNode.querySelector('.priceValueDisplay').innerHTML)-1 || 1;"}},[e._v("-")])])])]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",on:{click:function(t){return e.copyCode("dynamicButton")}}},[e._v("Copy HTML to clipboard "),e.dynamicCodeCopied?t("i",{staticClass:"fas fa-check"}):e._e()]),t("a",{staticClass:"btn sec",on:{click:function(t){return e.showCode("dynamicButton")}}},[e._v("Show HTML Code")])]),e._m(2)]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Override Default Store Colours")]),t("div",{staticClass:"flex colour-pickers"},[t("v-input-colorpicker",{style:"box-shadow: var(--dark) 0px 0px 0px 3px, #"+e.currentStore.store_colour+" -2rem 0px 0px -3px, #"+e.currentStore.store_colour+" -1rem 0px 0px -3px",model:{value:e.storePrimaryColour,callback:function(t){e.storePrimaryColour=t},expression:"storePrimaryColour"}}),t("v-input-colorpicker",{style:"margin-left:3rem;box-shadow: var(--dark) 0px 0px 0px 3px, #"+e.currentStore.store_accent_colour+" -2rem 0px 0px -3px, #"+e.currentStore.store_accent_colour+" -1rem 0px 0px -3px",model:{value:e.storeSecondaryColour,callback:function(t){e.storeSecondaryColour=t},expression:"storeSecondaryColour"}})],1),t("span",{staticClass:"help-text flex"},[e._v("Primary and Secondary / Accent Store colours.")])])]):e._e(),t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(1)}}},[e._v("Payment Page "),t("i",{class:1==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),1==e.accordianIndex?t("div",{staticClass:"accordian-sect"},[1==e.accordianIndex?t("div",{staticClass:"sub-sect"},[t("div",{staticClass:"switch"},[t("a",{class:"1"===e.currentStore.payment_page?"btn active":"btn",attrs:{target:"_blank_"+e.random},on:{click:function(t){return t.stopPropagation(),e.setPaymentPage(1)}}},[e._v(e._s("1"===e.currentStore.payment_page?"Page Enabled":"Enable Page"))]),t("a",{class:"1"===e.currentStore.payment_page?"btn":"btn severe active",on:{click:function(t){return t.stopPropagation(),e.setPaymentPage(0)}}},[e._v(e._s("1"===e.currentStore.payment_page?"Disable Page":"Page Disabled"))])]),t("span",{staticClass:"help-text"},[e._v("A Payment page allows anyone with the link to generate invoices for this store. This may be useful as a backup POS terminal or for receiving donations.")])]):e._e(),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Payment Pgae URL "),e.settingPaymentPage?t("i",{staticClass:"fas fa-asterisk spin"}):e._e()]),t("div",{staticClass:"input-placeholder"},[e._v(" https://pay.flat18.co.uk/store/"+e._s(e.storeCode)+" "),t("i",{staticClass:"fas fa-check-circle"})]),t("a",{attrs:{href:"https://pay.flat18.co.uk/store/"+e.storeCode}},[t("i",{staticClass:"fas fa-external-link-square-alt"})])]),t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Payment Pgae API "),e.settingPaymentPage?t("i",{staticClass:"fas fa-asterisk spin"}):e._e()]),t("div",{staticClass:"input-placeholder"},[e._v(" https://pay.flat18.co.uk/store/"+e._s(e.storeCode)+"/"),t("b",[e._v(e._s(e.select[0].selected))]),e._v("/"),t("i",[e._v("Item name or code")]),e._v(" "),t("i",{staticClass:"fas fa-check-circle"})]),t("a",{attrs:{href:"https://pay.flat18.co.uk/store/"+e.storeCode+"/"+e.select[0].selected+"/Item name or code"}},[t("i",{staticClass:"fas fa-external-link-square-alt"})]),t("span",{staticClass:"help-text"},[e._v("Store Payment Page API is programmable by setting the currency and item name as text strings in the URL.")])])]):e._e(),t("h2",{staticClass:"accordian-trigger",on:{click:function(t){return e.accordianIndexSet(2)}}},[e._v("Invoice Behaviour "),t("i",{class:2==e.accordianIndex?"fas fa-caret-down":"fas fa-caret-right"})]),2==e.accordianIndex?t("div",{staticClass:"accordian-sect"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:"storeName"}},[e._v("Payee must provide email on invoice "),e.settingEmailRequired?t("i",{staticClass:"fas fa-asterisk spin"}):e._e()]),t("div",{staticClass:"switch"},[t("a",{class:"1"===e.currentStore.require_email?"btn active":"btn",attrs:{target:"_blank_"+e.random},on:{click:function(t){return t.stopPropagation(),e.setPRequireEmail(1)}}},[e._v(e._s("1"===e.currentStore.require_email?"Email Required":"Require Payee Email"))]),t("a",{class:"1"===e.currentStore.require_email?"btn":"btn severe active",on:{click:function(t){return t.stopPropagation(),e.setPRequireEmail(0)}}},[e._v(e._s("1"===e.currentStore.require_email?"Allow Anonymous":"Not Required"))])]),t("span",{staticClass:"help-text"},[e._v("Choose whether a payee should identify themselves on an invoice by entering their email before proceeding to pay, or if invoices can be paid anonymously.")])])]):e._e()]),t("input",{staticClass:"transparent",attrs:{id:"copy_to_clipboard_workspace"}})])])},it=[function(){var e=this,t=e._self._c;return t("h1",[t("span",[e._v("Payment Assets")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"help-text"},[e._v("Embed these on your website for quick payments. "),t("br"),e._v("*Javascript must be enabled on the client device.")])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"help-text"},[e._v("Embed these on your website for quick payments. "),t("br"),e._v("*Javascript must be enabled on the client device.")])}],at={name:"StoreAssets",components:{"v-input-colorpicker":qe.a},data(){return{modal:{name:!1,payload:!1},message:!1,working:!1,accordianIndex:0,supportedCurrencies:["USD","GBP","EUR","TTD"],fixedPrice:10,primryColour:!1,accentColour:!1,dynamicCopied:!1,basicCodeCopied:!1,dynamicCodeCopied:!1,text:!1,text2:!1,settingPaymentPage:!1,settingEmailRequired:!1,select:[{open:!1,selected:"USD",options:!1}]}},watch:{working(){this.$store.commit("setWorking",this.working)}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores"}),storeCode(){return this.activeStore.substr(0,4)+this.currentStore.store_id_int+this.activeStore.substr(this.activeStore.length-4)},random(){let e=String(Math.floor(100*Math.random())+2+""+(new Date).getTime()+Math.floor(100*Math.random())+2+Math.random().toString(36).replace(/[^a-zA-Z]+/g,"").substr(0,5));return e},currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}},storePrimaryColour:{get(){return this.primryColour?"#"+this.primryColour:"#"+this.currentStore.store_colour},set(e){this.primryColour=e.replace("#",""),this.text=this.darkOrLight(this.primryColour)}},storeSecondaryColour:{get(){return this.accentColour?"#"+this.accentColour:"#"+this.currentStore.store_accent_colour},set(e){this.accentColour=e.replace("#",""),this.text2=this.darkOrLight(this.accentColour)}},textColor(){return this.text?"#"+this.text:"#"+this.currentStore.text_primary},textAccent(){return this.text2?"#"+this.text2:"#"+this.currentStore.text_accent}},mounted(){document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),this.supportedCurrencies.push(this.currentStore.network.toUpperCase()),this.select[0].options=this.supportedCurrencies},methods:{modernSelect(e,t){this.select[e].selected=t,this.select[e].open=!1},async setPaymentPage(e){await this.settingsAsync("payment_page",e,"settingPaymentPage")},async setPRequireEmail(e){await this.settingsAsync("require_email",e,"settingEmailRequired")},async settingsAsync(e,t,s){this[s]=!0;const i=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),a=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv});return await fetch("https://f18pay-api.flat18.co.uk/store-settings-async",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:i,storeName:a,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id,property:e,value:t})}).then(e=>e.json()).then(e=>{1==e.proceed?(this.$store.dispatch("getStores"),this[s]=!1):this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)}),t},darkOrLight(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,(function(e,t,s,i){return t+t+s+s+i+i}));let s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),i={r:parseInt(s[1],16),g:parseInt(s[2],16),b:parseInt(s[3],16)},a=299*i.r+587*i.g+114*i.b;return a/=255e3,console.log(a),a>=.6?"222":"fefefe"},async showCode(e){window.scrollTo({top:0,behavior:"smooth"}),this.modal.payload=await document.getElementById(e).innerHTML.replace(/</g,"\n\n<").replace(/&quot;/g,"'"),this.modal.name="HTML Code"},copyCode(e){let t=document.getElementById(e).innerHTML,s=document.getElementById("copy_to_clipboard_workspace");s.value=t,s.focus(),s.select();try{document.execCommand("copy")&&(this.dynamicCopied=t,this[e.replace(/Button/g,"CodeCopied")]=!0)}catch(i){console.error(i)}},_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1},accordianIndexSet(e){this.accordianIndex=this.accordianIndex==e?-1:e},closeModal(){this.modal.payload=!1,this.modal.name=!1}}},rt=at,ot=(s("b0a5"),Object(u["a"])(rt,st,it,!1,null,null,null)),nt=ot.exports,ct=function(){var e=this,t=e._self._c;return t("div",{class:e.working&&e.spinning?"store-management no-click spin-fresco":e.working&&!e.spinning?"store-management no-click":"store-management"},[t("div",{class:e.working?"form page working":"form page",on:{click:function(t){return t.stopPropagation(),e._null()}}},[t("h1",[t("span",[e._v("Invoices")]),t("span",{class:"badge "+e.currentStore.network},[e._v(e._s(e.currentStore.network))])]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect compact"},[t("label",{attrs:{for:""}},[e._v("Invoice Statistics")]),t("div",{staticClass:"flex info-combo-parent"},e._l(e.statisticsOrganised,(function(s,i){return t("div",{key:i,staticClass:"info-combo"},[t("span",{staticClass:"mono"},[e._v(e._s(s.value))]),t("span",[e._v(e._s(s.name))])])})),0)])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn refresh-button",attrs:{title:"Refresh"},on:{click:e.getInvoices}},[t("i",{staticClass:"fas fa-sync"})])]),t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn",on:{click:function(t){e.viewing=20}}},[e._m(0)]),t("a",{staticClass:"btn",on:{click:function(t){e.viewing=e.viewing-20<20?20:e.viewing=e.viewing-20}}},[t("i",{staticClass:"fas fa-chevron-left"})]),t("a",{},[e._v(e._s(e.range)+" to "+e._s(e.viewing>=e.count?e.count:e.viewing)+" of "+e._s(e.count))]),t("a",{staticClass:"btn",on:{click:function(t){e.viewing=e.viewing+20>e.count?e.count:e.viewing+20}}},[t("i",{staticClass:"fas fa-chevron-right"})]),t("a",{staticClass:"btn",on:{click:function(t){e.viewing=e.count}}},[e._m(1)])]),t("div",{staticClass:"date-range-parent"},[t("date-range-picker",{ref:"picker",attrs:{"locale-data":{firstDay:1,format:"dd-mm-yyyy"},minDate:null,maxDate:null,singleDatePicker:!1,timePicker:!1,timePicker24Hour:!1,showWeekNumbers:!0,showDropdowns:!1,autoApply:!0,linkedCalendars:!1},on:{update:e.getInvoices},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn",attrs:{title:"Clear filters"},on:{click:function(t){e.filter=!1}}},[t("i",{staticClass:"fas fa-filter"})]),t("div",{staticClass:"modern-select",on:{click:function(t){t.stopPropagation(),e.select[0].open=!e.select[0].open}}},[t("span",{staticClass:"selected"},[e._v(e._s(e.select[0].selected||"Filter")+" "),e.select[0].open?t("i",{staticClass:"fas fa-caret-up"}):t("i",{staticClass:"fas fa-caret-down"})]),e.select[0].open?t("ul",e._l(e.select[0].options,(function(s,i){return t("li",{key:i,on:{click:function(t){t.stopPropagation(),e.modernSelect(0,s),e.filter=s}}},[e._v(e._s(s))])})),0):e._e()])]),e.working?e._e():t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn download-file",attrs:{title:"Download Report"},on:{click:function(t){return e.downloadFile()}}},[t("i",{staticClass:"fas fa-file-download"})])])]),t("table",{staticClass:"invoice-list"},[e._m(2),e._l(e.invoices,(function(s,i){return[t("tr",{key:i,class:e.active==i?"list-item active":"list-item",on:{click:function(t){e.active=i}}},[t("td",{staticClass:"mono border-top-left"},[t("div",[t("span",[e._v(e._s(i+e.range))])])]),t("td",{staticClass:"mono"},[t("div",[t("span",[e._v(e._s(s.invoice_id.substr(0,6)))])])]),t("td",[t("div",[t("span",[t("vue-moments-ago",{attrs:{prefix:"",suffix:"ago",date:s.created,lang:"en"}})],1),e.active==i?t("span",[t("small",[e._v(e._s(s.created)+" [UTC]")])]):e._e()])]),t("td",[t("div",[t("span",[e._v(e._s(Number(s.invoice_value).toFixed(2))+" "),t("span",{staticClass:"badge"},[e._v(e._s(s.currency))])]),e.active==i?t("span",[t("small",[e._v("@"+e._s(s.exchange))])]):e._e()])]),t("td",{staticClass:"border-top-right"},[t("div",[t("span",{class:"status "+s._status},[s._status?e._e():t("i",{staticClass:"fas fa-asterisk spin"}),e._v(e._s(s._status||""))])])])]),e.active==i?t("tr",{key:i+"ex",staticClass:"list-item active"},[t("td",{staticClass:"border-bottom-right border-bottom-left",attrs:{colSpan:"5"}},[t("div",{staticClass:"inline-table-notes"},[s.reqToken?t("label",[e._v("Attached to Payment Request:")]):e._e(),s.reqToken?t("span",[e._v(e._s(s.reqToken.substr(0,6)))]):e._e(),s.reqEmail?t("label",[e._v("Payment Request Email:")]):e._e(),s.reqEmail?t("span",[e._v(e._s(s.reqEmail))]):e._e(),s.reqDesc?t("label",[e._v("Payment Request Description:")]):e._e(),s.reqDesc?t("span",[e._v(e._s(s.reqDesc))]):e._e(),s.tx2?t("label",[e._v("Item:")]):e._e(),s.tx2?t("span",[e._v(e._s(e._decode(s.tx2)))]):e._e(),s.payee_email?t("label",[e._v("Payee:")]):e._e(),s.payee_email?t("span",[e._v(e._s(s.payee_email))]):e._e(),t("label",[e._v("Crypto:")]),t("span",[e._v(e._s(s.btc_value)+" "+e._s(s.crypto))]),t("label",[e._v("Address:")]),t("a",{attrs:{target:"_blank",href:"https://www.blockchain.com/btc/address/"+s.address}},[e._v(e._s(s.address)+" "),t("i",{staticClass:"fas fa-external-link-square-alt"})]),t("label",[e._v("Received:")]),t("span",[e._v(e._s(e._f("0")(s.tx3))+" "+e._s(s.crypto)),t("br"),e._v(e._s((s.tx3/s.btc_value*100).toFixed(2))+" "),t("i",{staticClass:"fas fa-percent"})])])])]):e._e()]}))],2)]),t("div",[t("vue-html2pdf",{ref:"html2Pdf",attrs:{"show-layout":!1,"float-layout":!0,"enable-download":!0,"preview-modal":!1,filename:e.reportName,"pdf-quality":2,"manual-pagination":!0,"pdf-format":"a4","pdf-orientation":"portrait","pdf-content-width":"800px"},on:{progress:function(t){return e.onProgress(t)},hasStartedGeneration:function(t){e.working=!0},hasGenerated:function(t){e.working=!1}}},[t("section",{staticClass:"pdf-content",attrs:{slot:"pdf-content"},slot:"pdf-content"},[t("div",[t("h1",[t("svg",{staticClass:"f18",attrs:{"clip-rule":"evenodd","fill-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 158 201",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("clipPath",{attrs:{id:"a"}},[t("path",{attrs:{"clip-rule":"evenodd",d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}})]),t("g",{attrs:{fill:"none",transform:"matrix(.783337 0 0 1 -354.093 -485.418639)"}},[t("path",{attrs:{d:"m452.032 485.419h200.428v200.428h-200.428z"}}),t("g",{attrs:{transform:"matrix(.887335 0 0 .695083 463.512 491.096)"}},[t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z"}}),t("g",{staticStyle:{opacity:".4"},attrs:{"clip-path":"url(#a)",stroke:"var(--accent)"}},[t("path",{attrs:{d:"m152.859 88.576c0 36.334-29.498 65.832-65.832 65.832-18.819 0-35.804-7.914-47.807-20.592","stroke-width":"12.52",transform:"matrix(1.8383 0 0 1.8383 -83.7675 -82.1042)"}}),t("circle",{attrs:{cx:"87.027",cy:"88.576",r:"65.832","stroke-width":"23.27",transform:"matrix(.989007 0 0 .989007 -4.79082 -6.87718)"}})]),t("path",{attrs:{d:"m100 10.547c49.37 0 89.453 40.083 89.453 89.453 0 93.284-109.752 139.496-157.332 155.146-5.028 1.597-10.516.699-14.774-2.416s-6.774-8.074-6.774-13.35c-.026-44.211-.026-139.38-.026-139.38 0-49.37 40.083-89.453 89.453-89.453z",stroke:"var(--accent)","stroke-width":"23.02"}})])])]),e._v(" F18Pay")]),e._v(" Generated Report "),t("br"),t("i",[e._v("by: ")]),e._v(e._s(e.user)+" "),t("br"),t("i",[e._v("on: ")]),e._v(e._s(e.dateTime())+" "),t("br"),t("i",[e._v("for store: ")]),e._v(e._s(e._decode(this.currentStore.store_name))+" "),t("br"),t("br"),t("table",{staticClass:"print-view"},[t("tr",[t("th",[e._v("#")]),t("th",[e._v("ID")]),t("th",[e._v("Created")]),t("th",[e._v("Value")]),t("th",[e._v("Status")])]),e._l(e.invoices,(function(s,i){return[t("tr",{key:i,class:i%6==5?"html2pdf__page-break":""},[t("td",[t("div",[t("span",[e._v(e._s(i+e.range))])])]),t("td",{staticClass:"mono"},[t("div",[t("span",[e._v(e._s(s.invoice_id.substr(0,6)))])])]),t("td",[t("div",[t("span",[e._v(" "+e._s(s.created)+" [UTC]")])])]),t("td",[t("div",[t("span",[e._v(e._s(Number(s.invoice_value).toFixed(2))+" "),t("span",{staticClass:"badge"},[e._v(e._s(s.currency))])]),t("span",[t("small",[e._v("@"+e._s(s.exchange))])])])]),t("td",[t("div",[t("span",{class:"status "+s._status},[e._v(e._s(s._status||""))])])])]),t("tr",{key:i+"ex"},[t("td"),t("td",[t("b",[e._v("Details:")])]),t("td",{staticClass:"border-bottom-right border-bottom-left",attrs:{colSpan:"3"}},[t("div",{staticClass:"inline-table-notes"},[s.tx2?t("label",[e._v("Item:")]):e._e(),s.tx2?t("span",[e._v(e._s(e._decode(s.tx2))),t("br")]):e._e(),s.payee_email?t("label",[e._v("Payee:")]):e._e(),s.payee_email?t("span",[e._v(e._s(s.payee_email)),t("br")]):e._e(),t("label",[e._v("Crypto:")]),t("span",[e._v(e._s(s.btc_value)+" "+e._s(s.crypto))]),t("br"),t("label",[e._v("Address:")]),t("span",[e._v(e._s(s.address))]),t("br"),t("label",[e._v("Received:")]),t("span",[e._v(e._s(s.received)+" "+e._s(s.crypto)),t("br"),e._v(e._s((s.received/s.btc_value*100).toFixed(2))+" %")])])])])]}))],2)])])])],1)])},lt=[function(){var e=this,t=e._self._c;return t("i",[t("i",{staticClass:"fas fa-chevron-left"}),t("i",{staticClass:"fas fa-chevron-left"})])},function(){var e=this,t=e._self._c;return t("i",[t("i",{staticClass:"fas fa-chevron-right"}),t("i",{staticClass:"fas fa-chevron-right"})])},function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("#")]),t("th",[e._v("ID")]),t("th",[e._v("Created")]),t("th",[e._v("Value")]),t("th",[e._v("Status")])])}],dt=s("523e"),ut=s("bbf5"),ht=s.n(ut),pt=s("6480"),mt={name:"StoreAssets",components:{VueMomentsAgo:dt["a"],DateRangePicker:ht.a,VueHtml2pdf:pt["a"]},data(){return{message:!1,working:!0,spinning:!0,viewing:20,total:!1,filter:!1,invoices:!1,count:0,active:!1,statistics:!1,dateRange:{startDate:!1,endDate:!1},select:[{open:!1,selected:!1,options:["expired","confirmed","receiving","partial","1 confirmation","2 confirmations"]}]}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores",time:"time"}),reportName(){return"F18Pay Report for Store: "+this._decode(this.currentStore.store_name)+" ::"+this.dateRange.startDate+" to "+this.dateRange.endDate+" ::"+(this.filter?this.filter:"unfiltered")},computedDateRange(){return new Date},statisticsOrganised(){let e=[];if(this.statistics.average){let t=Number(this.statistics.average.sum)/Number(this.statistics.average.count);t=t<.001?t.toFixed(6):t.toFixed(3),t=isNaN(t)?0:t,e.push({name:"Average value "+this.currentStore.network,value:t})}if(this.statistics.statuses){let t=0;for(const s of this.statistics.statuses)e.push({name:this.capitalise(s.status),value:s.count}),t+=Number(s.count);e.push({name:"Total",value:t})}if(this.statistics.max){let t=Number(this.statistics.max);t=t<.001?t.toFixed(6):t.toFixed(3),e.push({name:"Highest value "+this.currentStore.network,value:t})}return e},range(){let e=this.viewing>20?this.viewing-20+1:1;return e},storeCode(){return this.activeStore.substr(0,4)+this.currentStore.store_id_int+this.activeStore.substr(this.activeStore.length-4)},random(){let e=String(Math.floor(100*Math.random())+2+""+(new Date).getTime()+Math.floor(100*Math.random())+2+Math.random().toString(36).replace(/[^a-zA-Z]+/g,"").substr(0,5));return e},currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}}},watch:{viewing:function(){this.getInvoices()},filter:function(){this.viewing=20,this.getInvoices()},working(){this.$store.commit("setWorking",this.working)}},mounted(){document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),this.getInvoiceStatistics(),this.getInvoices(),this.$store.dispatch("headerUIAppend",[{id:".refresh-button",fn:this.getInvoices},{id:".download-file",fn:this.downloadFile}])},created(){this.dateRange.startDate=this.currentStore.created.indexOf(" ")>=0?this.currentStore.created.split(" ")[0]:this.currentStore.created,this.dateRange.endDate=this.time},methods:{modernSelect(e,t){this.select[e].selected=t,this.select[e].open=!1},dateTime(){let e=new Date;return e.getFullYear()+"-"+ +(e.getMonth()+1<=9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<=9?"0"+e.getDate():e.getDate())+"-0"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},downloadFile(){this.$refs.html2Pdf.generatePdf()},capitalise(e){return e.substr(0,1).toUpperCase()+e.substr(1)},async getInvoiceStatistics(){const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-invoice-statistics",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:this.currentStore.store_id})}).then(e=>e.json()).then(async e=>{1==e.proceed?this.statistics=JSON.parse(await this.$store.dispatch("decrypt",{string:e.statistics,keyiv:this.keyiv})):this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async getInvoices(){this.working=!0,this.spinning=!0,this.active=!1;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv});Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"-":"-0")+e,(t>9?"-":"-0")+t].join("")};let i=this.dateRange.startDate instanceof Date?this.dateRange.startDate.yyyymmdd():String(this.dateRange.startDate);i=i.indexOf("T")>=0?i.split("T")[0]:i.indexOf(" ")>=0?i.split(" ")[0]:i;let a=this.dateRange.endDate instanceof Date?this.dateRange.endDate.yyyymmdd():String(this.dateRange.endDate);a=a.indexOf("T")>=0?a.split("T")[0]:a.indexOf(" ")>=0?a.split(" ")[0]:a;let r=this.viewing;await fetch("https://f18pay-api.flat18.co.uk/store-invoices",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:s,viewing:r,filter:this.filter,rangeStart:i,rangeEnd:a})}).then(e=>e.json()).then(async e=>{if(1==e.proceed){this.count=e.count,this.invoices=JSON.parse(await this.$store.dispatch("decrypt",{string:e.invoices,keyiv:this.keyiv})),this.dateRange.endDate=e.now,this.working=!1,this.spinning=!1;for(const e of this.invoices)1==e.status?e._status="receiving":4!=e.status?this.getStatus(e):e._status="confirmed"}else this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async getStatus(e){this.working=!0;const t=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:e.address,keyiv:this.keyiv}),i=await this.$store.dispatch("encrypt",{string:e.created,keyiv:this.keyiv}),a=await this.$store.dispatch("encrypt",{string:e.id,keyiv:this.keyiv}),r=await this.$store.dispatch("encrypt",{string:e.crypto,keyiv:this.keyiv}),o=await this.$store.dispatch("encrypt",{string:e.btc_value,keyiv:this.keyiv}),n=await this.$store.dispatch("encrypt",{string:e.status,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/invoice-check-status",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:t,fingerprint:this.fingerprint,keyivId:this.keyivId,address:s,created:i,id:a,crypto:r,value:o,status:n})}).then(e=>e.json()).then(async t=>{if(1==t.proceed){let s=await this.$store.dispatch("decrypt",{string:t.status,keyiv:this.keyiv});for(const t of this.invoices)if(t.id===e.id){t._status=s;break}this.working=!1}else this.message=t.debug?t.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1}}},vt=mt,ft=(s("fdfe"),s("587c"),Object(u["a"])(vt,ct,lt,!1,null,"6d61ab8b",null)),gt=ft.exports,yt=function(){var e=this,t=e._self._c;return t("div",{class:e.working&&e.spinning?"store-management no-click spin-fresco":e.working&&!e.spinning?"store-management no-click":"store-management"},[e.modal?t("div",{staticClass:"modal",on:{click:function(t){e.modal=!1}}},[t("div",{class:e.working?"form page working":"form page",on:{click:function(e){e.stopPropagation()}}},[t("h1",[e._v("New Payment request")]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),e.confirmedCreatedAddress?[t("div",{staticClass:"form-section"},[t("label",{attrs:{for:"storeName"}},[e._v("Payment Pgae API "),e.settingPaymentPage?t("i",{staticClass:"fas fa-asterisk spin"}):e._e()]),t("div",{staticClass:"input-placeholder"},[e._v(" https://pay.flat18.co.uk/api/v1/payment-requests/"+e._s(e.confirmedCreatedAddress)+" "),t("i",{staticClass:"fas fa-check-circle"})]),t("a",{attrs:{href:"https://pay.flat18.co.uk/api/v1/payment-requests/"+e.confirmedCreatedAddress}},[e._v("Payment Link "),t("i",{staticClass:"fas fa-external-link-square-alt"})]),t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",on:{click:function(t){return e.copyCode("https://pay.flat18.co.uk/api/v1/payment-requests/"+e.confirmedCreatedAddress)}}},[e._v("Copy link to clipboard "),e.copied?t("i",{staticClass:"fas fa-check"}):e._e()])]),t("span",{staticClass:"help-text"},[e._v(e._s(e.sendEmail?"Request has been emailed to the recipient.":"")),t("br"),e._v("You can copy the payment link to share it on any platform.")])]),t("input",{staticClass:"transparent",attrs:{id:"copy_to_clipboard_workspace"}})]:e._e(),e.confirmedCreatedAddress?e._e():[t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Description")]),e.select[0].options.length>0?t("div",{staticClass:"switch"},[t("a",{class:e.descriptionTypeExisting?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.descriptionTypeExisting=!0}}},[e._v("Use previous")]),t("a",{class:e.descriptionTypeExisting?"btn":"btn active",on:{click:function(t){t.stopPropagation(),e.descriptionTypeExisting=!1}}},[e._v("New description")])]):e._e(),e.descriptionTypeExisting?e._e():t("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{type:"text",placeholder:"E.g. Item Name..."},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e.descriptionTypeExisting?t("div",{staticClass:"modern-select",on:{click:function(t){t.stopPropagation(),e.select[0].open=!e.select[0].open}}},[t("span",{staticClass:"selected"},[e._v(e._s(e.select[0].selected||"Choose an item description...")+" "),e.select[0].open?t("i",{staticClass:"fas fa-caret-up"}):t("i",{staticClass:"fas fa-caret-down"})]),e.select[0].open?t("ul",e._l(e.select[0].options,(function(s,i){return t("li",{key:i,on:{click:function(t){t.stopPropagation(),e.modernSelect(0,e._decode(s))}}},[e._v(e._s(e._decode(s)))])})),0):e._e()]):e._e(),t("span",{staticClass:"help-text"})])]),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Recipient Email")]),e.select[1].options.length>0?t("div",{staticClass:"switch"},[t("a",{class:e.emailTypeExisting?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.emailTypeExisting=!0}}},[e._v("Use previous")]),t("a",{class:e.emailTypeExisting?"btn":"btn active",on:{click:function(t){t.stopPropagation(),e.emailTypeExisting=!1}}},[e._v("New email")])]):e._e(),e.emailTypeExisting?e._e():t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"mail@example.com"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.emailTypeExisting?t("div",{staticClass:"modern-select",on:{click:function(t){t.stopPropagation(),e.select[1].open=!e.select[1].open}}},[t("span",{staticClass:"selected"},[e._v(e._s(e.select[1].selected||"Choose a previously-used email...")+" "),e.select[1].open?t("i",{staticClass:"fas fa-caret-up"}):t("i",{staticClass:"fas fa-caret-down"})]),e.select[1].open?t("ul",e._l(e.select[1].options,(function(s,i){return t("li",{key:i,on:{click:function(t){return t.stopPropagation(),e.modernSelect(1,s)}}},[e._v(e._s(s))])})),0):e._e()]):e._e(),t("span",{staticClass:"help-text"})])]),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Request Value")]),e.value<0?t("div",{staticClass:"message"},[e._v("Invalid value")]):e._e(),t("div",{staticClass:"flex"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number",placeholder:"10.00"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),t("div",{staticClass:"modern-select",on:{click:function(t){t.stopPropagation(),e.select[2].open=!e.select[2].open}}},[t("span",{staticClass:"selected"},[e._v(e._s(e.select[2].selected||"Currency")+" "),e.select[2].open?t("i",{staticClass:"fas fa-caret-up"}):t("i",{staticClass:"fas fa-caret-down"})]),e.select[2].open?t("ul",e._l(e.select[2].options,(function(s,i){return t("li",{key:i,on:{click:function(t){return t.stopPropagation(),e.modernSelect(2,s)}}},[e._v(e._s(s))])})),0):e._e()])]),t("span",{staticClass:"help-text"})])]),t("div",{staticClass:"form-section"},[t("div",{staticClass:"sub-sect"},[t("label",{attrs:{for:""}},[e._v("Send Email to Recipient?")]),e.select[0].options.length>0?t("div",{staticClass:"switch"},[t("a",{class:e.sendEmail?"btn active":"btn",on:{click:function(t){t.stopPropagation(),e.sendEmail=!0}}},[e._v("Send via email")]),t("a",{class:e.sendEmail?"btn":"btn active severe",on:{click:function(t){t.stopPropagation(),e.sendEmail=!1}}},[e._v("Do not notify")])]):e._e(),e._m(0)])]),e.newRequestCheck?t("div",{staticClass:"form-section"},[t("div",{staticClass:"flex"},[t("a",{staticClass:"btn",on:{click:function(t){return t.stopPropagation(),e.doNewRequest()}}},[e._v("Next"),t("i",{staticClass:"fas fa-arrow-right"})])])]):e._e()]],2)]):e._e(),t("div",{class:e.working?"form page working":"form page",on:{click:function(t){return t.stopPropagation(),e._null()}}},[t("h1",[t("span",[e._v("Payment Requests")]),t("span",{class:"badge "+e.currentStore.network},[e._v(e._s(e.currentStore.network))])]),e.message?t("div",{staticClass:"message"},[t("i",{staticClass:"fas fa-exclamation-circle"}),e._v(" "+e._s(e.message))]):e._e(),t("div",{staticClass:"flex"},[t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn refresh-button",attrs:{title:"Refresh"},on:{click:e.getPaymentRequests}},[t("i",{staticClass:"fas fa-sync"})])]),t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn",attrs:{id:"newRequests",title:"Create Payment Request"},on:{click:function(t){return e.newRequest()}}},[t("i",{staticClass:"fas fa-plus"}),e._v(" "),t("span",[e._v("New Request")])])]),t("div",{staticClass:"button-cluster"},[t("a",{staticClass:"btn",on:{click:function(t){e.viewing=20}}},[e._m(1)]),t("a",{staticClass:"btn list-back",on:{click:function(t){e.viewing=e.viewing-20<20?20:e.viewing=e.viewing-20}}},[t("i",{staticClass:"fas fa-chevron-left"})]),t("a",{},[e._v(e._s(e.range)+" to "+e._s(e.viewing>=e.count?e.count:e.viewing)+" of "+e._s(e.count))]),t("a",{staticClass:"btn",on:{click:function(t){e.viewing=e.viewing+20>e.count?e.count:e.viewing+20}}},[t("i",{staticClass:"fas fa-chevron-right"})]),t("a",{staticClass:"btn",on:{click:function(t){e.viewing=e.count}}},[e._m(2)])]),t("div",{staticClass:"date-range-parent"},[t("date-range-picker",{ref:"picker",attrs:{"locale-data":{firstDay:1,format:"dd-mm-yyyy"},minDate:null,maxDate:null,singleDatePicker:!1,timePicker:!1,timePicker24Hour:!1,showWeekNumbers:!0,showDropdowns:!1,autoApply:!0,linkedCalendars:!1},on:{update:e.getPaymentRequests},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)]),t("table",{staticClass:"request-list"},[e._m(3),e._l(e.requests,(function(s,i){return[t("tr",{key:i,class:e.active==i?"list-item active":"list-item",on:{click:function(t){e.active=i}}},[t("td",{staticClass:"mono border-top-left"},[t("div",[t("span",[e._v(e._s(i+e.range))])])]),t("td",{staticClass:"mono"},[t("div",[t("span",[e._v(e._s(s.token.substr(0,6)))])])]),t("td",[t("div",[t("span",[t("vue-moments-ago",{attrs:{prefix:"",suffix:"ago",date:s.created,lang:"en"}})],1),e.active==i?t("span",[t("small",[e._v(e._s(s.created)+" [UTC]")])]):e._e()])]),t("td",[t("div",[t("span",[e._v(e._s(Number(s.invoice_value).toFixed(2))+" "),t("span",{staticClass:"badge"},[e._v(e._s(s.currency))])])])]),t("td",{staticClass:"border-top-right"},[t("div",[t("span",{class:"status "+s._status},[s._status?e._e():t("i",{staticClass:"fas fa-asterisk spin"}),e._v(e._s(s._status||""))])])])]),e.active==i?t("tr",{key:i+"ex",staticClass:"list-item active"},[t("td",{staticClass:"border-bottom-right border-bottom-left",attrs:{colSpan:"5"}},[t("div",{staticClass:"inline-table-notes"},[s.token?t("label",[e._v("Link:")]):e._e(),s.token?t("span",[t("a",{attrs:{href:"https://pay.flat18.co.uk/api/v1/payment-requests/"+s.token,target:"_blank"}},[e._v("Payment Link "+e._s(s.token.substr(0,6))+" "),t("i",{staticClass:"fas fa-external-link-square-alt"})])]):e._e(),s.description?t("label",[e._v("Description:")]):e._e(),s.description?t("span",[e._v(e._s(e._decode(s.description)))]):e._e(),s.payee_email?t("label",[e._v("Payee:")]):e._e(),s.payee_email?t("span",[e._v(e._s(s.payee_email))]):e._e(),t("label",[e._v("Received:")]),t("span",[e._v(e._s(s.assocReceived)+" "+e._s(s.crypto)+" ")]),s.invCount>0?t("label",[e._v("Invoices"),t("br"),e._v("generated:")]):e._e(),s.invCount>0?t("span",[e._v(e._s(s.invCount)+" ")]):e._e()])])]):e._e()]}))],2)])])},bt=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"help-text"},[e._v("F18 Pay can notify the recipient directly "),t("br"),e._v("or you can copy and paste the Payment Request link "),t("br"),e._v("to distribute via social media etc.")])},function(){var e=this,t=e._self._c;return t("i",[t("i",{staticClass:"fas fa-chevron-left"}),t("i",{staticClass:"fas fa-chevron-left"})])},function(){var e=this,t=e._self._c;return t("i",[t("i",{staticClass:"fas fa-chevron-right"}),t("i",{staticClass:"fas fa-chevron-right"})])},function(){var e=this,t=e._self._c;return t("tr",[t("th",[e._v("#")]),t("th",[e._v("ID")]),t("th",[e._v("Created")]),t("th",[e._v("Value")]),t("th",[e._v("Status")])])}],kt={name:"PaymentRequest",components:{VueMomentsAgo:dt["a"],DateRangePicker:ht.a},data(){return{message:!1,working:!0,spinning:!0,viewing:20,total:!1,filter:!1,filters:["expired","confirmed","receiving","partial","1 conf.","2 confs"],requests:!1,count:0,active:!1,statistics:!1,dateRange:{startDate:!1,endDate:!1},modal:!1,descriptionTypeExisting:!1,description:"",emailTypeExisting:!1,email:"",sendEmail:!1,value:"",select:[{open:!1,selected:!1,options:!1},{open:!1,selected:!1,options:!1},{open:!1,selected:!1,options:["USD","GBP","EUR","TTD"]}],confirmedCreatedAddress:!1,copied:!0}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",stores:"stores"}),newRequestCheck(){let e=0;return(!this.value||isNaN(this.value)||this.value<0)&&e++,this.select[2].selected||e++,this.emailTypeExisting&&!this.select[1].selected&&e++,(this.emailTypeExisting&&this.select[1].selected&&(this.select[1].selected.indexOf("@")<0||this.select[1].selected.indexOf(".")<0||this.select[1].selected.indexOf(".")>this.select[1].selected.length-3)||this.emailTypeExisting&&!this.select[1].selected)&&e++,this.descriptionTypeExisting&&!this.select[0].selected&&e++,this.emailTypeExisting||this.email||e++,(!this.emailTypeExisting&&this.email&&(this.email.indexOf("@")<0||this.email.indexOf(".")<0||this.email.indexOf(".")>this.email.length-3)||!this.emailTypeExisting&&!this.email)&&e++,this.descriptionTypeExisting||this.description||e++,!(e>0)},reportName(){return"F18Pay Report for Store: "+this._decode(this.currentStore.store_name)+" ::"+this.dateRange.startDate+" to "+this.dateRange.endDate+" ::"+(this.filter?this.filter:"unfiltered")},computedDateRange(){return new Date},statisticsOrganised(){let e=[];if(this.statistics.average){let t=Number(this.statistics.average.sum)/Number(this.statistics.average.count);t=t<.001?t.toFixed(6):t.toFixed(3),t=isNaN(t)?0:t,e.push({name:"Average value "+this.currentStore.network,value:t})}if(this.statistics.statuses){let t=0;for(const s of this.statistics.statuses)e.push({name:this.capitalise(s.status),value:s.count}),t+=Number(s.count);e.push({name:"Total",value:t})}if(this.statistics.max){let t=Number(this.statistics.max);t=t<.001?t.toFixed(6):t.toFixed(3),e.push({name:"Highest value "+this.currentStore.network,value:t})}return e},range(){let e=this.viewing>20?this.viewing-20+1:1;return e},storeCode(){return this.activeStore.substr(0,4)+this.currentStore.store_id_int+this.activeStore.substr(this.activeStore.length-4)},random(){let e=String(Math.floor(100*Math.random())+2+""+(new Date).getTime()+Math.floor(100*Math.random())+2+Math.random().toString(36).replace(/[^a-zA-Z]+/g,"").substr(0,5));return e},currentStore(){let e=!1;for(const t of this.stores)t.store_id==this.activeStore&&(e=t);return e},storeName:{get(){return this.storeNameProxy?this.storeNameProxy:this._decode(this.currentStore.store_name)},set(e){this.storeNameProxy=e}}},watch:{viewing:function(){this.getPaymentRequests()},filter:function(){this.viewing=20,this.getPaymentRequests()},working(){this.$store.commit("setWorking",this.working)},modal:function(){this.getPaymentRequests()}},mounted(){document.querySelector(".dynamic-cta-header-space")&&(document.querySelector(".dynamic-cta-header-space").innerHTML=""),this.getPrePopulate(),this.getPaymentRequests(),this.select[2].options.push(this.currentStore.network.toUpperCase()),this.$store.dispatch("headerUIAppend",[{id:"#newRequests",fn:this.newRequest},{id:".refresh-button",fn:this.getPaymentRequests}])},created(){this.dateRange.startDate=this.currentStore.created.indexOf(" ")>=0?this.currentStore.created.split(" ")[0]:this.currentStore.created},methods:{copyCode(e){let t=document.getElementById("copy_to_clipboard_workspace");t.value=e,t.focus(),t.select();try{document.execCommand("copy")&&(this.copied=!0)}catch(s){console.error(s)}},async doNewRequest(){this.working=!0;let e=!!(this.value&&!isNaN(this.value)&&this.value>0)&&this.value,t=this.select[2].selected,s=!this.emailTypeExisting&&this.email?this.email:!(!this.emailTypeExisting||!this.select[1].selected)&&this.select[1].selected,i=this.descriptionTypeExisting&&this.select[0].selected?this.select[0].selected:!(this.descriptionTypeExisting||!this.description)&&this.description;if(e&&t&&s&&i){const a=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),r=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv});i=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(i)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:s,keyiv:this.keyiv}),e=await this.$store.dispatch("encrypt",{string:e,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:t,keyiv:this.keyiv}),await fetch("https://f18pay-api.flat18.co.uk/store-requests-create-new",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:a,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:r,description:i,email:s,value:e,currency:t,notify:this.sendEmail})}).then(e=>e.json()).then(async e=>{if(1==e.proceed){if(console.log("debug",e.debug),"viewAddress"==e.extra){let t=JSON.parse(await this.$store.dispatch("decrypt",{string:e.address,keyiv:this.keyiv}));this.confirmedCreatedAddress=t,this.working=!1}}else this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})}else this.message="Please complete the entire form."},modernSelect(e,t){this.select[e].selected=t,this.select[e].open=!1},newRequest(){document.getElementById("main").scrollTo({top:0,behavior:"smooth"}),this.modal=!0,this.confirmedCreatedAddress=!1,this.copied=!1},dateTime(){let e=new Date;return e.getFullYear()+"-"+ +(e.getMonth()+1<=9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<=9?"0"+e.getDate():e.getDate())+"-0"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},downloadFile(){this.$refs.html2Pdf.generatePdf()},capitalise(e){return e.substr(0,1).toUpperCase()+e.substr(1)},async getPrePopulate(){const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/store-requests-pre-populate",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:t})}).then(e=>e.json()).then(async e=>{if(1==e.proceed){console.log("debug",e.debug);let t=JSON.parse(await this.$store.dispatch("decrypt",{string:e["pre-populate"],keyiv:this.keyiv}));this.select[0].options=await this.unique(t.descriptions),this.select[1].options=await this.unique(t.emails)}else this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async unique(e){let t=Array();for(const s of e)t.indexOf(s)<0&&t.push(s);return t},async getPaymentRequests(){this.working=!0,this.spinning=!0,this.active=!1;const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),t=await this.$store.dispatch("encrypt",{string:encodeURIComponent(encodeURI(this.storeName)),keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:this.currentStore.store_id,keyiv:this.keyiv});Date.prototype.yyyymmdd=function(){var e=this.getMonth()+1,t=this.getDate();return[this.getFullYear(),(e>9?"-":"-0")+e,(t>9?"-":"-0")+t].join("")};let i=this.dateRange.startDate instanceof Date?this.dateRange.startDate.yyyymmdd():String(this.dateRange.startDate);i=i.indexOf("T")>=0?i.split("T")[0]:i.indexOf(" ")>=0?i.split(" ")[0]:i;let a=this.dateRange.endDate instanceof Date?this.dateRange.endDate.yyyymmdd():String(this.dateRange.endDate);a=a.indexOf("T")>=0?a.split("T")[0]:a.indexOf(" ")>=0?a.split(" ")[0]:a;let r=this.viewing;await fetch("https://f18pay-api.flat18.co.uk/store-requests",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,storeName:t,fingerprint:this.fingerprint,keyivId:this.keyivId,store_id:s,viewing:r,filter:this.filter,rangeStart:i,rangeEnd:a})}).then(e=>e.json()).then(async e=>{if(1==e.proceed){this.count=e.count,this.requests=JSON.parse(await this.$store.dispatch("decrypt",{string:e.requests,keyiv:this.keyiv})),this.dateRange.endDate=e.now,this.working=!1,this.spinning=!1;for(const e of this.requests)1==e.status&&(e._status="receiving")}else this.message=e.debug?e.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async getStatus(e){this.working=!0;const t=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv}),s=await this.$store.dispatch("encrypt",{string:e.address,keyiv:this.keyiv}),i=await this.$store.dispatch("encrypt",{string:e.created,keyiv:this.keyiv}),a=await this.$store.dispatch("encrypt",{string:e.id,keyiv:this.keyiv}),r=await this.$store.dispatch("encrypt",{string:e.crypto,keyiv:this.keyiv}),o=await this.$store.dispatch("encrypt",{string:e.btc_value,keyiv:this.keyiv}),n=await this.$store.dispatch("encrypt",{string:e.status,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/request-check-status",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:t,fingerprint:this.fingerprint,keyivId:this.keyivId,address:s,created:i,id:a,crypto:r,value:o,status:n})}).then(e=>e.json()).then(async t=>{if(1==t.proceed){let s=await this.$store.dispatch("decrypt",{string:t.status,keyiv:this.keyiv});for(const t of this.requests)if(t.id===e.id){t._status=s;break}this.working=!1}else this.message=t.debug?t.debug:"There was a problem with the information provided."}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},_decode(e){let t=decodeURIComponent(decodeURI(e));return t},_null(){return!1}}},wt=kt,_t=(s("63bf"),s("19cb"),Object(u["a"])(wt,yt,bt,!1,null,"5a8aafe1",null)),Ct=_t.exports,St={name:"Dashboard",components:{StoreSummary:Oe,StoreSettings:He,WalletSettings:tt,StoreAssets:nt,Invoices:gt,PaymentRequest:Ct},data(){return{stores:[],invoice_values:!1,invoice_values2:!1,invoice_dates:!1,chartDestroy:!1}},computed:{...Object(c["b"])({session:"session",fingerprint:"fingerprint",user:"user",keyiv:"keyiv",keyivId:"keyivId",activeStore:"activeStore",storeView:"storeView",storeModalView:"storeModalView"})},async created(){let e=await this.$store.dispatch("verifySession");e?this.fetchStores():(console.log("NO SESSION"),"home"!==this.$router.currentRoute.name&&this.$router.push({name:"home"}))},mounted(){this.$store.dispatch("getStores"),this.activeStore||this.$store.commit("setViewTitle","Dashboard")},methods:{async fetchStores(){const e=await this.$store.dispatch("encrypt",{string:this.user,keyiv:this.keyiv});await fetch("https://f18pay-api.flat18.co.uk/stores",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:e,fingerprint:this.fingerprint,keyivId:this.keyivId})}).then(e=>e.json()).then(e=>{this.message=!!e.debug&&e.debug,1==e.proceed?(this.stores=e.stores,this.$store.commit("setStores",e.stores),this.storeView||this.$store.commit("setStoreView","overview")):this.message="Failed to fetch stores"}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},async openStore(e){this.$store.commit("setStoreView","overview"),this.$store.commit("setActiveStore",e)}}},xt=St,Pt=(s("052e"),s("deb5"),s("0ba9"),Object(u["a"])(xt,Ce,Se,!1,null,null,null)),Tt=Pt.exports;i["a"].use(V["a"]);const It=[{path:"/",name:"home",component:G,meta:{title:"Home",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}},{path:"/login",name:"login",component:se,meta:{title:"Login",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}},{path:"/signup",name:"signup",component:ce,meta:{title:"Signup",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}},{path:"/verify-email",name:"verify-email",component:me,meta:{title:"Verify Email",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}},{path:"/reset-password",name:"reset-password",component:_e,meta:{title:"Verify Email",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}},{path:"/dashboard",name:"dashboard",component:Tt,meta:{title:"Dashboard",metaTags:[{name:"description",content:"Placeholder"},{property:"og:description",content:"Placeholder"}]}}],jt=new V["a"]({mode:"history",base:"/f18pay-frontend/",routes:It});jt.beforeEach((e,t,s)=>{const i=e.matched.slice().reverse().find(e=>e.meta&&e.meta.title),a=e.matched.slice().reverse().find(e=>e.meta&&e.meta.metaTags);if(i&&(document.title=i.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map(e=>e.parentNode.removeChild(e)),!a)return s();a.meta.metaTags.map(e=>{const t=document.createElement("meta");return Object.keys(e).forEach(s=>{t.setAttribute(s,e[s])}),t.setAttribute("data-vue-router-controlled",""),t}).forEach(e=>document.head.appendChild(e)),s()});var Nt=jt;let Et={theme:"light",fingerprint:!1,user:!1,session:!1,keyivId:!1,keyiv:!1,stores:!1,sidebarCollapse:!1,activeStore:!1,chart:{chartData:!1,options:!1},storeView:!1,storeModalView:!1,viewTitle:!1,showTitle:!1,time:!1,working:!1,notifications:{authFailure:!1}};var At=Et;let Dt={fingerprint:e=>e.fingerprint,user:e=>e.user,session:e=>e.session,keyivId:e=>e.keyivId,keyiv:e=>e.keyiv,theme:e=>e.theme,stores:e=>e.stores,sidebarCollapse:e=>e.sidebarCollapse,activeStore:e=>e.activeStore,authFailure:e=>e.notifications.authFailure,chart:e=>e.chart,storeView:e=>e.storeView,storeModalView:e=>e.storeModalView,showTitle:e=>e.showTitle,viewTitle:e=>e.viewTitle,time:e=>e.time,working:e=>e.working};var Rt=Dt;let Ot={setFingerprint(e,t){e.fingerprint=t,localStorage.setItem("fingerprint",t)},setUser(e,t){e.user=t,localStorage.setItem("user",t)},setSession(e,t){e.session=t},setSidebarCollapse(e,t){e.sidebarCollapse=t,localStorage.setItem("sidebarCollapse",t)},setStores(e,t){e.stores=t},setActiveStore(e,t){e.activeStore=t,localStorage.setItem("activeStore",t)},setKeyivId(e,t){e.keyivId=t[0],e.keyiv=t[1],localStorage.setItem("keyivId",t[0]),localStorage.setItem("keyiv",t[1])},setTheme(e,t){e.theme=t,localStorage.setItem("theme",t)},setAuthFailure(e,t){e.notifications.authFailure=t},setChart(e,t){e.chart.chartData=t.chartData,e.chart.options=t.options},setStoreView(e,t){e.storeView=t},setViewTitle(e,t){e.viewTitle=t},setShowTitle(e,t){e.showTitle=t},setStoreModalView(e,t){e.storeModalView=t},setTime(e,t){e.time=t},setWorking(e,t){e.working=t}};var Ft=Ot;i["a"].use(K.a);let Jt={headerUIAppend(e,t){for(const s of t){let e=!!s.fn&&s.fn,t=s.id;if(1==document.querySelectorAll(".dynamic-cta-header-space").length&&document.querySelector(t)){let s=document.querySelector(t).cloneNode(!0);s.setAttribute("id",s.getAttribute("id")+"_"+Date.now()),s.addEventListener("click",(function(){e()})),document.querySelector(".dynamic-cta-header-space").append(s)}}},async encrypt(e,t){let s=t.string,a=t.keyiv,r=a.substr(0,32);r=i["a"].CryptoJS.SHA256(r).toString(i["a"].CryptoJS.enc.Hex).substr(0,32);let o=a.substr(33);o=i["a"].CryptoJS.SHA256(o).toString(i["a"].CryptoJS.enc.Hex).substr(0,16);const n=i["a"].CryptoJS.AES.encrypt(s,i["a"].CryptoJS.enc.Utf8.parse(r),{iv:i["a"].CryptoJS.enc.Utf8.parse(o)}).toString();return n},async decrypt(e,t){let s=t.string,a=t.keyiv,r=a.substr(0,32);r=i["a"].CryptoJS.SHA256(r).toString(i["a"].CryptoJS.enc.Hex).substr(0,32);let o=a.substr(33);o=i["a"].CryptoJS.SHA256(o).toString(i["a"].CryptoJS.enc.Hex).substr(0,16);const n=i["a"].CryptoJS.enc.Utf8.stringify(i["a"].CryptoJS.AES.decrypt(s,i["a"].CryptoJS.enc.Utf8.parse(r),{iv:i["a"].CryptoJS.enc.Utf8.parse(o),mode:i["a"].CryptoJS.mode.CBC})).toString();return n},async init(e){localStorage.getItem("fingerprint")?e.commit("setFingerprint",localStorage.getItem("fingerprint")):e.commit("setFingerprint",!1),localStorage.getItem("user")?e.commit("setUser",localStorage.getItem("user")):e.commit("setUser",!1),localStorage.getItem("keyivId")&&localStorage.getItem("keyiv")?e.commit("setKeyivId",[localStorage.getItem("keyivId"),localStorage.getItem("keyiv")]):e.commit("setKeyivId",!1),localStorage.getItem("sidebarCollapse")?e.commit("setSidebarCollapse",localStorage.getItem("sidebarCollapse")):e.commit("setSidebarCollapse",!1),localStorage.getItem("activeStore")?e.commit("setActiveStore",localStorage.getItem("activeStore")):e.commit("setActiveStore",!1)},async verifySession({commit:e,getters:t,dispatch:s},i){let a=!1;const r=t.user,o=t.fingerprint,n=t.keyivId,c=t.keyiv;if((!r||!o||!n||!c)&&(e("setSession",!1),a=!1,console.warn("No session. Missing parameters."),!i))return a;const l=await s("encrypt",{string:r,keyiv:c});return await fetch("https://f18pay-api.flat18.co.uk/validate-fingerprint-check-username",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({fingerprint:o,username:l,keyivId:n})}).then(e=>e.json()).then(t=>{1==t.proceed?(e("setSession",!0),e("setTime",t.time),a=!0):(e("setSession",!1),a=!1);let s=Nt.currentRoute.name;if(!a)switch(s){case"login":case"signup":case"verify-email":case"reset-password":case void 0:break;case"dashboard":e("setAuthFailure","Session expired. Please re-authenticate to continue.");break;case"home":break;default:Nt.push({name:"home"})}if(a){switch(s){case"home":case"login":case"signup":case"verify-email":case"reset-password":case void 0:Nt.push({name:"dashboard"});break;default:}e("setAuthFailure",!1)}}).catch(e=>{console.error("Error:",e),a=!1}),i?void 0:a},async getStores({commit:e,getters:t,dispatch:s}){const i=await s("encrypt",{string:t.user,keyiv:t.keyiv});await fetch("https://f18pay-api.flat18.co.uk/stores",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({username:i,fingerprint:t.fingerprint,keyivId:t.keyivId})}).then(e=>e.json()).then(t=>{1==t.proceed&&e("setStores",t.stores)}).catch(e=>{this.message=this.message+" \nError: "+e+"\n",console.error("Error:",e)})},test(e){console.log(e)},ui(e){localStorage&&localStorage.getItem("theme")&&e.commit("setTheme",localStorage.getItem("theme"))}};var Ut=Jt;i["a"].use(c["a"]);const qt=new c["a"].Store({strict:!0,state:At,mutations:Ft,actions:Ut,getters:Rt});i["a"].config.productionTip=!1,new i["a"]({router:Nt,store:qt,render:e=>e(z)}).$mount("#app"),qt.dispatch("init"),qt.dispatch("ui")},"586b":function(e,t,s){"use strict";s("693a")},"587c":function(e,t,s){"use strict";s("b325")},"63bf":function(e,t,s){"use strict";s("d16d")},"693a":function(e,t,s){},"6a0c":function(e,t,s){"use strict";s("7d79")},"7d79":function(e,t,s){},"8a91":function(e,t,s){},"8c38":function(e,t,s){"use strict";s("fd55")},"8e27":function(e,t,s){"use strict";s("43a7")},"903d":function(e,t,s){},"9e4c":function(e,t,s){},"9f51":function(e,t,s){},a05b:function(e,t,s){},b0a5:function(e,t,s){"use strict";s("9f51")},b196:function(e,t,s){"use strict";s("1404")},b325:function(e,t,s){},d16d:function(e,t,s){},deb5:function(e,t,s){"use strict";s("34d8")},eb67:function(e,t,s){"use strict";s("ff94")},eed4:function(e,t,s){},f325:function(e,t,s){},fd55:function(e,t,s){},fdfe:function(e,t,s){"use strict";s("046f")},ff94:function(e,t,s){}});
//# sourceMappingURL=app.32ff5656.js.map